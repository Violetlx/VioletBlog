<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>VMware</title>
      <link href="/posts/545a6120.html"/>
      <url>/posts/545a6120.html</url>
      
        <content type="html"><![CDATA[<p><img src="/img/load.gif" data-original="https://www.abackup.com/easybackup-tutorials/images/backup-vmware/vmware-workstation.png" alt="VMwareè™šæ‹Ÿæœº"></p><h1 id="ä»€ä¹ˆæ˜¯è™šæ‹Ÿæœº"><a href="#ä»€ä¹ˆæ˜¯è™šæ‹Ÿæœº" class="headerlink" title="ä»€ä¹ˆæ˜¯è™šæ‹Ÿæœº"></a>ä»€ä¹ˆæ˜¯è™šæ‹Ÿæœº</h1><p>è™šæ‹Ÿæœºæ˜¯æŒ‡è½¯ä»¶æ¨¡æ‹Ÿçš„å…·æœ‰å®Œæ•´ç¡¬ä»¶ç³»ç»ŸåŠŸèƒ½çš„ï¼Œè¿è¡Œåœ¨ä¸€ä¸ªå®Œå…¨éš”ç¦»ç¯å¢ƒä¸­çš„å®Œæ•´è®¡ç®—ç³»ç»Ÿï¼Œåœ¨å®ä½“è®¡ç®—æœºä¸­èƒ½å¤Ÿå®Œæˆçš„å·¥ä½œï¼Œåœ¨è™šæ‹Ÿæœºä¸­éƒ½èƒ½å¤Ÿå®ç°ã€‚</p><hr><h1 id="VMware-ç®€ä»‹"><a href="#VMware-ç®€ä»‹" class="headerlink" title="VMware ç®€ä»‹"></a>VMware ç®€ä»‹</h1><blockquote><p>ç®€è€Œè¨€ä¹‹ï¼Œ<a href="https://www.vmware.com/"><strong>VMware</strong></a>ï¼ˆé“¾æ¥ä½äº <strong>ibm.com</strong> å¤–éƒ¨ï¼‰ä¸»è¦ç”¨äºå¼€å‘è™šæ‹ŸåŒ–è½¯ä»¶ã€‚</p><p>è™šæ‹ŸåŒ–è½¯ä»¶ä¼šåœ¨è®¡ç®—æœºç¡¬ä»¶ä¸Šåˆ›å»ºä¸€ä¸ªæŠ½è±¡å±‚ï¼Œä»è€Œèƒ½å¤Ÿå°†å•å°è®¡ç®—æœºçš„ç¡¬ä»¶è¦ç´ ï¼ˆå¤„ç†å™¨ã€å†…å­˜ã€å­˜å‚¨ç­‰ï¼‰åˆ†æˆå¤šä¸ªè™šæ‹Ÿè®¡ç®—æœºï¼ˆé€šå¸¸ç§°ä¸ºè™šæ‹Ÿæœº ( <strong>VM</strong> )ï¼‰ã€‚ æ¯ä¸ªè™šæ‹Ÿæœºéƒ½è¿è¡Œè‡ªå·±çš„æ“ä½œç³»ç»Ÿ ( <strong>OS</strong> )ï¼Œå…¶è¡Œä¸ºå°±åƒä¸€å°ç‹¬ç«‹çš„è®¡ç®—æœºï¼Œè€Œå®é™…ä¸Šå®ƒåªæ˜¯åœ¨ä¸€éƒ¨åˆ†åº•å±‚è®¡ç®—æœºç¡¬ä»¶ä¸Šè¿è¡Œã€‚</p></blockquote><h2 id="â… å¤§æ¦‚ä»‹ç»"><a href="#â… å¤§æ¦‚ä»‹ç»" class="headerlink" title="â… å¤§æ¦‚ä»‹ç»"></a>â… å¤§æ¦‚ä»‹ç»</h2><p><strong>VMware</strong> è™šæ‹Ÿæœºè½¯ä»¶æ˜¯ä¸€ä¸ªè™šæ‹Ÿ <strong>PC</strong> è½¯ä»¶ï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨ä¸€å°ç”µè„‘ä¸Šè¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œç³»ç»Ÿã€‚</p><h2 id="â…¡-è¯¦ç»†ä»‹ç»"><a href="#â…¡-è¯¦ç»†ä»‹ç»" class="headerlink" title="â…¡ è¯¦ç»†ä»‹ç»"></a>â…¡ è¯¦ç»†ä»‹ç»</h2><p><strong>VMware</strong>  æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„æ¡Œé¢è™šæ‹Ÿè®¡ç®—æœºè½¯ä»¶ï¼Œæä¾›ç”¨æˆ·å¯åœ¨å•ä¸€çš„æ¡Œé¢ä¸ŠåŒæ—¶è¿è¡Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå’Œè¿›è¡Œå¼€å‘ã€æµ‹è¯• ã€éƒ¨ç½²æ–°çš„åº”ç”¨ç¨‹åºçš„æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚<strong>VMware</strong> å¯åœ¨ä¸€éƒ¨å®ä½“æœºå™¨ä¸Šæ¨¡æ‹Ÿå®Œæ•´çš„ç½‘ç»œç¯å¢ƒï¼Œä»¥åŠå¯ä¾¿äºæºå¸¦çš„è™šæ‹Ÿæœºå™¨ï¼Œå…¶æ›´å¥½çš„çµæ´»æ€§ä¸å…ˆè¿›çš„æŠ€æœ¯èƒœè¿‡äº†å¸‚é¢ä¸Šå…¶ä»–çš„è™šæ‹Ÿè®¡ç®—æœºè½¯ä»¶ã€‚</p><hr><h1 id="VMware-ä¸‹è½½"><a href="#VMware-ä¸‹è½½" class="headerlink" title="VMware ä¸‹è½½"></a>VMware ä¸‹è½½</h1><h2 id="â… -å®˜ç½‘åœ°å€"><a href="#â… -å®˜ç½‘åœ°å€" class="headerlink" title="â…  å®˜ç½‘åœ°å€"></a>â…  å®˜ç½‘åœ°å€</h2><p><a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html">ä¸‹è½½ VMware Workstation Pro | CN</a></p><h2 id="â…¡-ç½‘ç›˜ä¸‹è½½"><a href="#â…¡-ç½‘ç›˜ä¸‹è½½" class="headerlink" title="â…¡ ç½‘ç›˜ä¸‹è½½"></a>â…¡ ç½‘ç›˜ä¸‹è½½</h2><p>æ‰“å¼€æµè§ˆå™¨æœç´¢ <strong>VMware</strong> ä¸‹è½½ï¼Œç„¶åæ‰“å¼€å¸–å­ï¼Œå¤åˆ¶ç½‘ç›˜ä¸‹è½½ã€‚</p><p>æˆ–è€…æ‰“å¼€ <a href="https://www.bilibili.com/"><code>B ç«™</code></a> ï¼Œè¿›è¡Œæœç´¢ã€‚</p><hr><h1 id="VMware-å®‰è£…"><a href="#VMware-å®‰è£…" class="headerlink" title="VMware å®‰è£…"></a>VMware å®‰è£…</h1><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v1.png" alt="VMå®‰è£…"></p><p><strong>VMware</strong> å®‰è£…ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v2.png" alt="VMå®‰è£…"></p><p>æ¥å—åè®®ï¼Œä¸‹ä¸€æ­¥</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v3.png" alt="VMå®‰è£…"></p><p>è‡ªå®šä¹‰ <strong>VMware</strong> å®‰è£…ä½ç½®ï¼Œä¸‹ä¸€æ­¥</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v4.png" alt="VMå®‰è£…"></p><p>å‹¾é€‰å¿«æ·æ–¹å¼ï¼Œä¸‹ä¸€æ­¥</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v5.png" alt="VMå®‰è£…"></p><p>å®‰è£… <strong>VMware</strong> è™šæ‹Ÿæœºï¼Œç‚¹å‡»å®Œæˆå³å¯ã€‚</p><hr><h1 id="VMware-æ–°å»ºè™šæ‹Ÿæœº"><a href="#VMware-æ–°å»ºè™šæ‹Ÿæœº" class="headerlink" title="VMware æ–°å»ºè™šæ‹Ÿæœº"></a>VMware æ–°å»ºè™šæ‹Ÿæœº</h1><p><strong>â‘  åˆ›å»ºæ–°çš„è™šæ‹Ÿæœº</strong></p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v6.png" alt="VMå®‰è£…"></p><p><strong>â‘¡ é€‰æ‹©å…¸å‹æˆ–è‡ªå®šä¹‰</strong></p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v7.png" alt="VMå®‰è£…"></p><p><strong>â‘¢ å®‰è£…ç³»ç»Ÿé©±åŠ¨</strong></p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v8.png" alt="VMå®‰è£…"></p><p><strong>â‘£ ä¸‹è½½ Linux é•œåƒ</strong></p><p>ç½‘æ˜“å¼€æºé•œåƒç«™:<a href="http://mirrors.163.com/">http://mirrors.163.com/</a><br>é˜¿é‡Œäº‘å®˜æ–¹é•œåƒç«™:<a href="http://mirrors.aliyun.com/">http://mirrors.aliyun.com</a></p><p>å¯é€‰ <strong>Centos</strong> æˆ– <strong>Unbtor</strong></p><div style="display: flex;             justify-content: center;             gap: 10px;             padding: 10px;             background-color: #fff;             border-radius: 10px;             box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);             text-align: center;">    <img src="/img/load.gif" data-original="https://imcn.me/wp-content/uploads/2014/07/centos-logo.jpg" alt="Image 1" style="width: 60%; border-radius: 10px;">    <img src="/img/load.gif" data-original="https://p1.ssl.qhimg.com/t01244e5eda16b4451f.png" alt="Image 2" style="width: 45%; border-radius: 10px;"></div>**â‘¤ é…ç½®ä¿¡æ¯**<p><img src="/img/load.gif" data-original="/images/tools/vm/a/v9.png" alt="VMå®‰è£…"></p><p><strong>â‘¥ è‡ªå®šä¹‰åç§°å’Œè·¯å¾„</strong></p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v10.png" alt="VMå®‰è£…"></p><p><strong>â‘¦ è®¾ç½®ç£ç›˜</strong></p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v11.png" alt="VMå®‰è£…"></p><p><strong>â‘§ é…ç½®ç¡¬ä»¶</strong></p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v12.png" alt="VMå®‰è£…"></p><p><strong>â‘¨ ç‚¹å‡»å®Œæˆ</strong></p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v13.png" alt="VMå®‰è£…"></p><p>å³å¯å®Œæˆåˆ›å»ºï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v14.png" alt="VMå®‰è£…"></p><hr><h1 id="å®‰è£…-Centos7"><a href="#å®‰è£…-Centos7" class="headerlink" title="å®‰è£… Centos7"></a>å®‰è£… Centos7</h1><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯åŠ¨åˆšåˆšåˆ›å»ºçš„è™šæ‹Ÿæœºï¼Œå¼€å§‹å®‰è£… <code>Centos7</code> ç³»ç»Ÿï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v14.png" alt="VMå®‰è£…"></p><p>å¯åŠ¨åéœ€è¦é€‰æ‹©å®‰è£…èœå•ï¼Œå°†é¼ æ ‡ç§»å…¥é»‘çª—å£ä¸­åï¼Œå°†æ— æ³•å†ä½¿ç”¨é¼ æ ‡ï¼Œéœ€è¦æŒ‰ä¸Šä¸‹é”®é€‰æ‹©èœå•ã€‚é€‰ä¸­ <strong>Install Centos 7</strong> åæŒ‰ä¸‹å›è½¦ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v17.png" alt="VMå®‰è£…"></p><p>ç„¶åä¼šæç¤ºæˆ‘ä»¬æŒ‰ä¸‹ <strong>enter</strong> é”®ç»§ç»­ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v18.png" alt="VMå®‰è£…"></p><p>è¿‡ä¸€ä¼šå„¿åï¼Œä¼šè¿›å…¥è¯­è¨€é€‰æ‹©èœå•ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨é¼ æ ‡é€‰æ‹©ã€‚é€‰æ‹©ä¸­æ–‡-ç®€ä½“ä¸­æ–‡ï¼Œç„¶åç»§ç»­ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v19.png" alt="VMå®‰è£…"></p><p>æ¥ä¸‹æ¥ï¼Œä¼šè¿›å…¥å®‰è£…é…ç½®é¡µé¢ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v20.png" alt="VMå®‰è£…"></p><p>é¼ æ ‡å‘ä¸‹æ»šåŠ¨åï¼Œæ‰¾åˆ°ç³»ç»Ÿå®‰è£…ä½ç½®é…ç½®ï¼Œç‚¹å‡»ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v21.png" alt="VMå®‰è£…"></p><p>é€‰æ‹©åˆšåˆšæ·»åŠ çš„ç£ç›˜ï¼Œå¹¶ç‚¹å‡»å®Œæˆï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v22.png" alt="VMå®‰è£…"></p><p>ç„¶åå›åˆ°é…ç½®é¡µé¢ï¼Œè¿™æ¬¡ç‚¹å‡»ã€Šç½‘ç»œå’Œä¸»æœºåã€‹ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v23.png" alt="VMå®‰è£…"></p><p>åœ¨ç½‘ç»œé¡µé¢åšä¸‹é¢çš„å‡ ä»¶äº‹æƒ…ï¼š</p><ol><li>ä¿®æ”¹ä¸»æœºåä¸ºè‡ªå·±å–œæ¬¢çš„ä¸»æœºåï¼Œä¸è¦å‡ºç°ä¸­æ–‡å’Œç‰¹æ®Šå­—ç¬¦ï¼Œå»ºè®®ç”¨localhost</li><li>ç‚¹å‡»åº”ç”¨</li><li>å°†ç½‘ç»œè¿æ¥æ‰“å¼€</li><li>ç‚¹å‡»é…ç½®ï¼Œè®¾ç½®è¯¦ç»†ç½‘ç»œä¿¡æ¯</li></ol><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v24.png" alt="VMå®‰è£…"></p><p>æœ¬æœºç½‘ç»œè¯¦ç»†ä¿¡æ¯ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v25.png" alt="VMå®‰è£…"></p><p>ç‚¹å‡»é…ç½®æŒ‰é’®åï¼Œæˆ‘ä»¬éœ€è¦æŠŠç½‘å¡åœ°å€æ”¹ä¸ºé™æ€IPï¼Œè¿™æ ·å¯ä»¥é¿å…æ¯æ¬¡å¯åŠ¨è™šæ‹ŸæœºIPéƒ½å˜åŒ–ã€‚æ‰€æœ‰é…ç½®ç…§æ¬ä½ è‡ªå·±æˆªå›¾çš„ç½‘ç»œä¿¡æ¯å¡«å†™ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v26.png" alt="VMå®‰è£…"></p><p>æœ€åï¼Œç‚¹å‡»å®ŒæˆæŒ‰é’®ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v27.png" alt="VMå®‰è£…"></p><p>å›åˆ°é…ç½®ç•Œé¢åï¼Œç‚¹å‡»<code>å¼€å§‹å®‰è£…</code>ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v28.png" alt="VMå®‰è£…"></p><p>æ¥ä¸‹æ¥éœ€è¦è®¾ç½®rootå¯†ç ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v29.png" alt="VMå®‰è£…"></p><p>å¡«å†™ä½ è¦ä½¿ç”¨çš„rootå¯†ç ï¼Œç„¶åç‚¹å‡»å®Œæˆï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v30.png" alt="VMå®‰è£…"></p><p>æ¥ä¸‹æ¥ï¼Œè€å¿ƒç­‰å¾…å®‰è£…å³å¯ã€‚</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v31.png" alt="VMå®‰è£…"></p><p>ç­‰å¾…å®‰è£…å®Œæˆåï¼Œç‚¹å‡»<strong>é‡å¯</strong>ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v32.png" alt="VMå®‰è£…"></p><p>è¾“å…¥å¯†ç å³å¯ç™»å½•ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v15.png" alt="VMæŠ€å·§"></p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v16.png" alt="VMæŠ€å·§"></p><p>æ‰“å¼€ä¸­ç«¯è¾“å…¥å¯†ç åˆ‡æ¢ root ç”¨æˆ·ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v33.png" alt="VMå®‰è£…"></p><p>æ­¤æ—¶ä½ è¦è¾“å…¥å¯†ç ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯å¯†ç æ˜¯<strong>éšè—</strong>çš„ï¼Œè¾“å…¥äº†ä¹Ÿçœ‹ä¸è§ã€‚æ‰€ä»¥æ”¾å¿ƒè¾“å…¥ï¼Œå®Œæˆåå›è½¦å³å¯ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v34.png" alt="VMå®‰è£…"></p><p>æµ‹è¯•ç½‘ç»œæ˜¯å¦é€šç•…ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ping www.baidu.com</span><br></pre></td></tr></table></figure><p>å¦‚æœçœ‹åˆ°è¿™æ ·çš„ç»“æœä»£è¡¨ç½‘ç»œç•…é€šï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v35.png" alt="VMå®‰è£…"></p><p>é»˜è®¤pingå‘½ä»¤ä¼šæŒç»­æ‰§è¡Œï¼ŒæŒ‰ä¸‹<code>CTRL </code>+ <code>C</code>åå‘½ä»¤å³å¯åœæ­¢ã€‚</p><hr><h1 id="è®¾ç½®è™šæ‹Ÿæœºå¿«ç…§"><a href="#è®¾ç½®è™šæ‹Ÿæœºå¿«ç…§" class="headerlink" title="è®¾ç½®è™šæ‹Ÿæœºå¿«ç…§"></a>è®¾ç½®è™šæ‹Ÿæœºå¿«ç…§</h1><p>åœ¨è™šæ‹Ÿæœºå®‰è£…å®Œæˆåï¼Œæœ€å¥½ç«‹åˆ»è®¾ç½®ä¸€ä¸ªå¿«ç…§ï¼Œè¿™æ ·ä¸€æ—¦å°†æ¥è™šæ‹Ÿæœºå‡ºç°é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿæ¢å¤ã€‚</p><p>æˆ‘ä»¬å…ˆåœæ­¢è™šæ‹Ÿæœºï¼Œç‚¹å‡» <strong>VMware</strong> é¡¶éƒ¨èœå•ä¸­çš„<code>æš‚åœ</code>**<code>ä¸‹æ‹‰é€‰æ¡†</code>**ï¼Œé€‰æ‹©<code>å…³é—­å®¢æˆ·æœº</code>ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v36.png" alt="VMå¿«ç…§"></p><p>æ¥ç€ï¼Œç‚¹å‡»VMwareèœå•ä¸­çš„ğŸ”§æŒ‰é’®:</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v37.png" alt="VMå¿«ç…§"></p><p>ç„¶ååœ¨å¼¹å‡ºçš„å¿«ç…§ç®¡ç†çª—å£ä¸­ï¼Œç‚¹å‡» <strong>æ‹æ‘„å¿«ç…§</strong>ï¼Œå¡«å†™æ–°çš„å¿«ç…§ä¿¡æ¯ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v38.png" alt="VMå¿«ç…§"></p><p>å¿«ç…§æ‹æ‘„å®Œæˆäº†ï¼è€Œä¸”æˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒé˜¶æ®µæ‹æ‘„å¤šä¸ªä¸åŒå¿«ç…§ä½œä¸ºå¤‡ä»½ï¼Œæ–¹ä¾¿åæœŸæ¢å¤æ•°æ®ã€‚</p><p>å‡å¦‚ä»¥åè™šæ‹Ÿæœºæ–‡ä»¶å—æŸï¼Œéœ€è¦æ¢å¤åˆ°åˆå§‹çŠ¶æ€çš„è¯ï¼Œå¯ä»¥é€‰ä¸­è¦æ¢å¤çš„å¿«ç…§ï¼Œç‚¹å‡»è½¬åˆ°å³å¯ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/vm/a/v39.png" alt="VMå¿«ç…§"></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> è™šæ‹Ÿæœºå·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bangumis</title>
      <link href="/posts/undefined.html"/>
      <url>/posts/undefined.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>MybatisPlus</title>
      <link href="/posts/8af9e237.html"/>
      <url>/posts/8af9e237.html</url>
      
        <content type="html"><![CDATA[<h1 id="MybatisPlusç®€ä»‹"><a href="#MybatisPlusç®€ä»‹" class="headerlink" title="MybatisPlusç®€ä»‹"></a>MybatisPlusç®€ä»‹</h1><p>åœ¨æ—¥å¸¸å¼€å‘ç”Ÿæ´»ä¸­ï¼Œå•è¡¨çš„ <strong>CRUD</strong> åŠŸèƒ½ä»£ç é‡å¤åº¦å¾ˆé«˜ï¼Œä¹Ÿæ²¡ä»€ä¹ˆéš¾åº¦ï¼Œä½†æ˜¯è¿™éƒ¨åˆ†ä»£ç çš„å¼€å‘é‡å¾€å¾€å´æ¯”è¾ƒå¤§ï¼Œå¼€å‘èµ·æ¥ç›¸å½“è´¹æ—¶ã€‚</p><p>å› æ­¤ï¼Œç›®å‰ä¼ä¸šä¸­ä¼šä½¿ç”¨ä¸€äº›ç»„ä»¶æ¥ç®€åŒ– <strong>CRUD</strong> å¼€å‘å·¥ä½œï¼Œè€Œå›½å†…ï¼Œä½¿ç”¨æœ€å¤šçš„ä¸€ä¸ªç»„ä»¶å°±æ˜¯ <strong>MybatisPlus</strong> ã€‚</p><p>å®˜æ–¹ç½‘ç«™å¦‚ä¸‹ï¼š</p><p><a href="https://baomidou.com/"><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v1.png" alt="https://baomidou.com"></a></p><p><strong>MybatisPlus</strong> ä¸ä»…ä»…å¯ä»¥ç®€åŒ–å•è¡¨æ“ä½œï¼Œè€Œä¸”è¿˜å¯¹ <strong>Mybatis</strong> è¿›è¡Œäº†å¢å¼ºã€‚å¯ä»¥è®©æˆ‘ä»¬èƒ½å¤Ÿç®€å•é«˜æ•ˆåœ°è¿›è¡Œå¼€å‘ã€‚</p><p>æˆ‘ä»¬éœ€è¦æŒæ¡çš„å†…å®¹å¦‚ä¸‹ï¼š</p><ul><li><p>èƒ½åˆ©ç”¨ <strong>MybatisPlus</strong> å®ç°åŸºæœ¬çš„ <strong>CRUD</strong></p></li><li><p>ä½¿ç”¨æ¡ä»¶æ„é€ å™¨æ„å»ºæŸ¥è¯¢å’Œæ›´æ–°è¯­å¥</p></li><li><p>æŒæ¡ <strong>MybatisPlus</strong> ä¸­å¸¸ç”¨çš„æ³¨è§£</p></li><li><p>ä¼šä½¿ç”¨ <strong>MybatisPlus</strong> å¤„ç†æšä¸¾ç±»ã€<strong>JSON</strong> ç±»å‹å­—æ®µ</p></li><li><p>ä¼šä½¿ç”¨ <strong>MybatisPlus</strong> å®ç°åˆ†é¡µ</p></li></ul><hr><h1 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h1><p>åˆ›å»ºä¸€ä¸ª <strong>MybatisPlus</strong> é¡¹ç›®ï¼Œå¹¶å‡†å¤‡ä¸€äº›åŸºç¡€æ•°æ®ã€‚</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v2.png" alt="MybatisPlusé¡¹ç›®"></p><h2 id="â… ç¯å¢ƒå‡†å¤‡"><a href="#â… ç¯å¢ƒå‡†å¤‡" class="headerlink" title="â… ç¯å¢ƒå‡†å¤‡"></a>â… ç¯å¢ƒå‡†å¤‡</h2><p>â‘  æ‰“å¼€ <strong>IDEA</strong> å¯¼å…¥ <strong>MybatisPlus</strong> é¡¹ç›®</p><p>â‘¡ æ‰“å¼€ <strong>navicat</strong> å¯¼å…¥ <strong>mp.sql</strong> æ–‡ä»¶</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v4.png" alt="é…ç½®æ•°æ®åº“"></p><p>â‘¢ é…ç½®é¡¹ç›® <strong>JDK</strong> ç‰ˆæœ¬</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v3.png" alt="é…ç½®jdk"></p><p>â‘£ åœ¨ <strong>application.yml</strong> æ–‡ä»¶ä¸­é…ç½®å‚æ•°</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">com.itheima:</span> <span class="string">debug</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">dateformat:</span> <span class="string">HH:mm:ss</span></span><br></pre></td></tr></table></figure><h2 id="â…¡-å¿«é€Ÿå¼€å§‹"><a href="#â…¡-å¿«é€Ÿå¼€å§‹" class="headerlink" title="â…¡ å¿«é€Ÿå¼€å§‹"></a>â…¡ å¿«é€Ÿå¼€å§‹</h2><ul><li>å¼•å…¥ <strong>MybatisPlus</strong> ä¾èµ–</li><li>å®šä¹‰ <strong>Mapper</strong></li></ul><h3 id="â‘ -å¼•å…¥ä¾èµ–"><a href="#â‘ -å¼•å…¥ä¾èµ–" class="headerlink" title="â‘  å¼•å…¥ä¾èµ–"></a>â‘  å¼•å…¥ä¾èµ–</h3><p>**MybatisPlus **æä¾›äº† <strong>starter</strong>ï¼Œå®ç°äº†è‡ªåŠ¨ <strong>Mybatis</strong> ä»¥åŠ <strong>MybatisPlus</strong> çš„è‡ªåŠ¨è£…é…åŠŸèƒ½ï¼Œåæ ‡å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis-plus-boot-starter--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¯¥ä¾èµ–åŒ…å«äº†å¯¹ <strong>mybatis</strong> çš„è‡ªåŠ¨è£…é…ï¼Œå› æ­¤ä¸éœ€è¦ <strong>Mybatis</strong> çš„ <strong>starter</strong> ã€‚</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis-plus-boot-starter--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ•°æ®åº“è¿æ¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æµ‹è¯•--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="â‘¡-å®šä¹‰-Mapper"><a href="#â‘¡-å®šä¹‰-Mapper" class="headerlink" title="â‘¡ å®šä¹‰ Mapper"></a>â‘¡ å®šä¹‰ Mapper</h3><p>ä¸ºäº†ç®€åŒ–å•è¡¨ <strong>CRUD</strong> å¼€å‘ï¼Œ<strong>MybatisPlus</strong> å·²ç»æä¾›äº†ä¸€ä¸ªåŸºç¡€çš„ <strong>BaseMapper</strong> æ¥å£æ¥å®ç°å•è¡¨ <strong>CRUD</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Mapper ç»§æ‰¿è¯¥æ¥å£åï¼Œæ— éœ€ç¼–å†™ mapper.xml æ–‡ä»¶ï¼Œå³å¯è·å¾—CRUDåŠŸèƒ½</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;è¿™ä¸ª Mapper æ”¯æŒ id æ³›å‹&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> hubin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2016-01-23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BaseMapper</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(T entity)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® ID åˆ é™¤</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id ä¸»é”®ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å®ä½“(ID)åˆ é™¤</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.4.4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(T entity)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> columnMap è¡¨å­—æ®µ map å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">int</span> <span class="title function_">deleteByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.delete(Wrappers.&lt;T&gt;query().allEq(columnMap));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entity æ¡ä»¶ï¼Œåˆ é™¤è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º null,é‡Œé¢çš„ entity ç”¨äºç”Ÿæˆ where è¯­å¥ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">delete</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ï¼ˆæ ¹æ®IDæˆ–å®ä½“ æ‰¹é‡åˆ é™¤ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> idList ä¸»é”®IDåˆ—è¡¨æˆ–å®ä½“åˆ—è¡¨(ä¸èƒ½ä¸º null ä»¥åŠ empty)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLL)</span> Collection&lt;?&gt; idList)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® ID ä¿®æ”¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateById</span><span class="params">(<span class="meta">@Param(Constants.ENTITY)</span> T entity)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® whereEntity æ¡ä»¶ï¼Œæ›´æ–°è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity        å®ä½“å¯¹è±¡ (set æ¡ä»¶å€¼,å¯ä»¥ä¸º null)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> updateWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º null,é‡Œé¢çš„ entity ç”¨äºç”Ÿæˆ where è¯­å¥ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(<span class="meta">@Param(Constants.ENTITY)</span> T entity, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; updateWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ›´æ–°è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> updateWrapper &#123;<span class="doctag">@link</span> UpdateWrapper&#125; or &#123;<span class="doctag">@link</span> LambdaUpdateWrapper&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; updateWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® ID æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id ä¸»é”®ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    T <span class="title function_">selectById</span><span class="params">(Serializable id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> idList ä¸»é”®IDåˆ—è¡¨(ä¸èƒ½ä¸º null ä»¥åŠ empty)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;T&gt; <span class="title function_">selectBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLL)</span> Collection&lt;? extends Serializable&gt; idList)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> idList        idList ä¸»é”®IDåˆ—è¡¨(ä¸èƒ½ä¸º null ä»¥åŠ empty)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultHandler resultHandler ç»“æœå¤„ç†å™¨ &#123;<span class="doctag">@link</span> ResultHandler&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">selectBatchIds</span><span class="params">(<span class="meta">@Param(Constants.COLL)</span> Collection&lt;? extends Serializable&gt; idList, ResultHandler&lt;T&gt; resultHandler)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢ï¼ˆæ ¹æ® columnMap æ¡ä»¶ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> columnMap è¡¨å­—æ®µ map å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span> List&lt;T&gt; <span class="title function_">selectByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.selectList(Wrappers.&lt;T&gt;query().allEq(columnMap));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢ï¼ˆæ ¹æ® columnMap æ¡ä»¶ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> columnMap     è¡¨å­—æ®µ map å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultHandler resultHandler ç»“æœå¤„ç†å™¨ &#123;<span class="doctag">@link</span> ResultHandler&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">selectByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap, ResultHandler&lt;T&gt; resultHandler)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.selectList(Wrappers.&lt;T&gt;query().allEq(columnMap), resultHandler);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;æŸ¥è¯¢ä¸€æ¡è®°å½•ï¼Œä¾‹å¦‚ qw.last(&quot;limit 1&quot;) é™åˆ¶å–ä¸€æ¡è®°å½•, æ³¨æ„ï¼šå¤šæ¡æ•°æ®ä¼šæŠ¥å¼‚å¸¸&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span> T <span class="title function_">selectOne</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.selectOne(queryWrapper, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•ï¼Œç°åœ¨ä¼šæ ¹æ®&#123;<span class="doctag">@code</span> throwEx&#125;å‚æ•°åˆ¤æ–­æ˜¯å¦æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœä¸ºfalseå°±ç›´æ¥è¿”å›ä¸€æ¡æ•°æ®</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;æŸ¥è¯¢ä¸€æ¡è®°å½•ï¼Œä¾‹å¦‚ qw.last(&quot;limit 1&quot;) é™åˆ¶å–ä¸€æ¡è®°å½•, æ³¨æ„ï¼šå¤šæ¡æ•°æ®ä¼šæŠ¥å¼‚å¸¸&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> throwEx      boolean å‚æ•°ï¼Œä¸ºtrueå¦‚æœå­˜åœ¨å¤šä¸ªç»“æœç›´æ¥æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span> T <span class="title function_">selectOne</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper, <span class="type">boolean</span> throwEx)</span> &#123;</span><br><span class="line">        List&lt;T&gt; list = <span class="built_in">this</span>.selectList(queryWrapper);</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> list.size();</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> list.get(<span class="number">0</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (throwEx) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">TooManyResultsException</span>(<span class="string">&quot;Expected one result (or null) to be returned by selectOne(), but found: &quot;</span> + size);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> list.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦å­˜åœ¨è®°å½•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">exists</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> <span class="built_in">this</span>.selectCount(queryWrapper);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span> != count &amp;&amp; count &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Long <span class="title function_">selectCount</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;T&gt; <span class="title function_">selectList</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper  å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultHandler ç»“æœå¤„ç†å™¨ &#123;<span class="doctag">@link</span> ResultHandler&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">selectList</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper, ResultHandler&lt;T&gt; resultHandler)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page         åˆ†é¡µæŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.3.2</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;T&gt; <span class="title function_">selectList</span><span class="params">(IPage&lt;T&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page          åˆ†é¡µæŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper  å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultHandler ç»“æœå¤„ç†å™¨ &#123;<span class="doctag">@link</span> ResultHandler&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">selectList</span><span class="params">(IPage&lt;T&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper, ResultHandler&lt;T&gt; resultHandler)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">selectMaps</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper  å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultHandler ç»“æœå¤„ç†å™¨ &#123;<span class="doctag">@link</span> ResultHandler&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">selectMaps</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper, ResultHandler&lt;Map&lt;String, Object&gt;&gt; resultHandler)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page         åˆ†é¡µæŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.3.2</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">selectMaps</span><span class="params">(IPage&lt;? extends Map&lt;String, Object&gt;&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page          åˆ†é¡µæŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper  å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultHandler ç»“æœå¤„ç†å™¨ &#123;<span class="doctag">@link</span> ResultHandler&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">selectMaps</span><span class="params">(IPage&lt;? extends Map&lt;String, Object&gt;&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper, ResultHandler&lt;Map&lt;String, Object&gt;&gt; resultHandler)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;æ³¨æ„ï¼š åªè¿”å›ç¬¬ä¸€ä¸ªå­—æ®µçš„å€¼&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    &lt;E&gt; List&lt;E&gt; <span class="title function_">selectObjs</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;æ³¨æ„ï¼š åªè¿”å›ç¬¬ä¸€ä¸ªå­—æ®µçš„å€¼&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper  å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resultHandler ç»“æœå¤„ç†å™¨ &#123;<span class="doctag">@link</span> ResultHandler&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.4</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    &lt;E&gt; <span class="keyword">void</span> <span class="title function_">selectObjs</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper, ResultHandler&lt;E&gt; resultHandler)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page         åˆ†é¡µæŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span> &lt;P <span class="keyword">extends</span> <span class="title class_">IPage</span>&lt;T&gt;&gt; P <span class="title function_">selectPage</span><span class="params">(P page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        page.setRecords(selectList(page, queryWrapper));</span><br><span class="line">        <span class="keyword">return</span> page;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page         åˆ†é¡µæŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">default</span> &lt;P <span class="keyword">extends</span> <span class="title class_">IPage</span>&lt;Map&lt;String, Object&gt;&gt;&gt; P <span class="title function_">selectMapsPage</span><span class="params">(P page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        page.setRecords(selectMaps(page, queryWrapper));</span><br><span class="line">        <span class="keyword">return</span> page;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› æ­¤æˆ‘ä»¬åªéœ€è¦å°†è‡ªå®šä¹‰çš„ <strong>Mapper</strong> å®ç° <strong>BaseMapper</strong> æ¥å£ï¼Œå°±æ— éœ€è‡ªå·±å®ç° <strong>CRUD</strong> ã€‚</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v5.png" alt="é…ç½®Mapper"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mybatisplus.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mybatisplus.domain.entity.UserEntity;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;UserEntity&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="â‘¢-æµ‹è¯•"><a href="#â‘¢-æµ‹è¯•" class="headerlink" title="â‘¢ æµ‹è¯•"></a>â‘¢ æµ‹è¯•</h3><p>æ–°å»ºæµ‹è¯•ç±»ï¼Œè¿›è¡Œ <strong>CURD</strong> æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mybatisplus;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.json.JSONUtil;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.OrderItem;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.Wrappers;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> com.mybatisplus.domain.entity.AddressEntity;</span><br><span class="line"><span class="keyword">import</span> com.mybatisplus.domain.entity.UserEntity;</span><br><span class="line"><span class="keyword">import</span> com.mybatisplus.eum.UserStatus;</span><br><span class="line"><span class="keyword">import</span> com.mybatisplus.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.mybatisplus.service.IAddressService;</span><br><span class="line"><span class="keyword">import</span> com.mybatisplus.service.IUserService;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.apache.catalina.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest(classes = MyBatisPlusApplication.class)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyBatisPlusApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> IUserService userService;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> IAddressService addressService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * â‘ æŸ¥è¯¢å‡ºåå­—ä¸­å¸¦oçš„,å­˜æ¬¾å¤§äºç­‰äº1000å…ƒçš„ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testQueryMapper</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;UserEntity&gt; userEntityList = userMapper.selectList(Wrappers.lambdaQuery(UserEntity.class)</span><br><span class="line">                .like(UserEntity::getUsername, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">                .ge(UserEntity::getBalance, <span class="number">1000</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;userEntityList ===&gt; &quot;</span>+userEntityList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * â‘¡æ›´æ–°ç”¨æˆ·åä¸ºJackçš„ç”¨æˆ·ä½™é¢ä¸º2000</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdateMapper</span><span class="params">()</span> &#123;</span><br><span class="line">        userMapper.update(Wrappers.lambdaUpdate(UserEntity.class)</span><br><span class="line">                .set(UserEntity::getBalance, <span class="number">2000</span>)</span><br><span class="line">                .eq(UserEntity::getUsername, <span class="string">&quot;Jack&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * â‘¢åŸºäºUpdateWrapperçš„æ›´æ–° æ›´æ–°idä¸º1ã€2ã€4çš„ç”¨æˆ·ä½™é¢,æ‰£200</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdateWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">        userMapper.update(<span class="literal">null</span>, Wrappers.&lt;UserEntity&gt;update().lambda()</span><br><span class="line">                .setSql(<span class="string">&quot;balance = balance - 200&quot;</span>)</span><br><span class="line">                .in(UserEntity::getId, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è‡ªå®šä¹‰SQL</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testCustomWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 1.å‡†å¤‡è‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">        List&lt;Long&gt; ids = List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>);</span><br><span class="line">        <span class="comment">// 2ã€å®šä¹‰æ¡ä»¶</span></span><br><span class="line">        QueryWrapper&lt;UserEntity&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;UserEntity&gt;().in(<span class="string">&quot;id&quot;</span>, ids);</span><br><span class="line">        <span class="comment">// 3.è°ƒç”¨mapperçš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œç›´æ¥ä¼ é€’Wrapper</span></span><br><span class="line">        userMapper.deductBalanceByIds(<span class="number">200</span>, wrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡æ–°å¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testInsertBatch</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;UserEntity&gt; userEntityList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">1000</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">l</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">            <span class="type">UserEntity</span> <span class="variable">userEntity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserEntity</span>();</span><br><span class="line">            userEntity.setUsername(<span class="string">&quot;user_&quot;</span> + i);</span><br><span class="line">            userEntity.setBalance(<span class="number">1000</span>+i);</span><br><span class="line"><span class="comment">//            userEntity.setInfo(1);</span></span><br><span class="line">            userEntity.setPhone(<span class="string">&quot;phone_&quot;</span>+i);</span><br><span class="line">            userEntity.setStatus(UserStatus.NORMAL);</span><br><span class="line">            userEntity.setPassword(<span class="string">&quot;password_&quot;</span>+i);</span><br><span class="line">            userEntity.setCreateTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">            userEntity.setUpdateTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"><span class="comment">//            userEntity.setInfo(JSONUtil.toJsonStr(1));</span></span><br><span class="line">            userEntityList.add(userEntity);</span><br><span class="line">            <span class="keyword">if</span> (i%<span class="number">1000</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                userService.saveBatch(userEntityList);</span><br><span class="line">                <span class="comment">//4ã€æ¸…ç©ºé›†åˆ,å‡†å¤‡ä¸‹ä¸€æ‰¹æ•°æ®</span></span><br><span class="line">                userEntityList.clear();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">l1</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;è€—æ—¶ï¼š&quot;</span>+(l1-l));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åœ°å€é€»è¾‘åˆ é™¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1ã€åˆ é™¤</span></span><br><span class="line">        addressService.removeById(<span class="number">59L</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2ã€æŸ¥è¯¢</span></span><br><span class="line">        <span class="type">AddressEntity</span> <span class="variable">addressEntity</span> <span class="operator">=</span> addressService.getById(<span class="number">59L</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;addressEntity ===&gt; &quot;</span>+addressEntity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æšä¸¾å¤„ç†æµ‹è¯•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testService</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;UserEntity&gt; list = userService.list();</span><br><span class="line">        list.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæµ‹è¯•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testPageQuery</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 1.åˆ†é¡µæŸ¥è¯¢ï¼Œnew Page()çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼šé¡µç ã€æ¯é¡µå¤§å°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">current</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">        Page&lt;UserEntity&gt; page = Page.of(current, size);</span><br><span class="line">        <span class="comment">// 1.2ã€æ’åº</span></span><br><span class="line">        page.addOrder(OrderItem.asc(<span class="string">&quot;balance&quot;</span>));</span><br><span class="line">        page.addOrder(OrderItem.desc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">        Page&lt;UserEntity&gt; p = userService.page(page);</span><br><span class="line">        <span class="comment">// 2.æ€»æ¡æ•°</span></span><br><span class="line">        System.out.println(<span class="string">&quot;total = &quot;</span> + p.getTotal());</span><br><span class="line">        <span class="comment">// 3.æ€»é¡µæ•°</span></span><br><span class="line">        System.out.println(<span class="string">&quot;pages = &quot;</span> + p.getPages());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.æ•°æ®</span></span><br><span class="line">        List&lt;UserEntity&gt; records = p.getRecords();</span><br><span class="line">        records.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="â…¢-å¸¸è§æ³¨è§£"><a href="#â…¢-å¸¸è§æ³¨è§£" class="headerlink" title="â…¢ å¸¸è§æ³¨è§£"></a>â…¢ å¸¸è§æ³¨è§£</h2><p>åœ¨ä¸Šè¿°çš„æ¡ˆä¾‹ä¸­æˆ‘ä»¬å‘ç°ä»…ä»…å¼•å…¥äº†ä¾èµ–ï¼Œç»§æ‰¿äº† <strong>BaseMapper</strong> å°±èƒ½å¤Ÿä½¿ç”¨ <strong>MybatisPlus</strong> ã€‚ä½†æ˜¯é—®é¢˜æ˜¯ï¼š</p><p><strong>MybatisPlus</strong> æ˜¯æ€ä¹ˆçŸ¥é“æˆ‘ä»¬è¦æŸ¥è¯¢çš„æ˜¯å“ªå¼ è¡¨å‘¢ï¼Ÿè¡¨ä¸­æœ‰å“ªäº›å­—æ®µå‘¢ï¼Ÿ</p><p>å…¶å®åœ¨æˆ‘ä»¬ç»§æ‰¿ BaseMapper çš„æ—¶å€™ï¼Œå°±ç»™å…¶æŒ‡å®šäº†ä¸€ä¸ªæ³›å‹ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v5.png" alt="é…ç½®Mapper"></p><p>æ³›å‹ä¸­çš„ <strong>UserEntity</strong> å°±æ˜¯ä¸æ•°æ®åº“å¯¹åº”çš„ <strong>PO</strong> å®ä½“</p><p><strong>MybatisPlus</strong> å°±æ˜¯æ ¹æ® <strong>PO</strong> å®ä½“çš„ä¿¡æ¯æ¥æ¨æ–­å‡ºæ•°æ®åº“è¡¨çš„ä¿¡æ¯ï¼Œä»è€Œç”Ÿæˆ <strong>SQL</strong>ï¼Œé»˜è®¤æƒ…å†µæ˜¯ï¼š</p><ul><li><strong>MybatisPlus</strong> ä¼šæŠŠ <strong>PO</strong> å®ä½“çš„ç±»åé©¼å³°è½¬ä¸‹åˆ’çº¿ä½œä¸ºè¡¨å</li><li><strong>MybatisPlus</strong> ä¼šæŠŠ <strong>PO</strong> å®ä½“çš„æ‰€æœ‰å˜é‡åé©¼å³°è½¬ä¸‹åˆ’çº¿ä½œä¸ºè¡¨çš„å­—æ®µåï¼Œå¹¶æ ¹æ®å˜é‡ç±»å‹æ¨æ–­å­—æ®µç±»å‹</li><li><strong>MybatisPlus</strong> ä¼šæŠŠåä¸º <strong>id</strong> çš„å­—æ®µä½œä¸ºä¸»é”®</li></ul><p>ä½†åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé»˜è®¤çš„å®ç°ä¸æˆ‘ä»¬çš„å®é™…åœºæ™¯ä¸ç¬¦ï¼Œå› æ­¤ <strong>MybatisPlus</strong> æä¾›äº†ä¸€äº›æ³¨è§£æ¥è®©æˆ‘ä»¬è¿›è¡Œå£°æ˜</p><h3 id="â‘ -TableName"><a href="#â‘ -TableName" class="headerlink" title="â‘  @TableName"></a>â‘  @TableName</h3><ul><li>æè¿°ï¼šè¡¨åæ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨</li><li>ä½¿ç”¨ä½ç½®ï¼šå®ä½“ç±»</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>TableName</strong> çš„å±æ€§ï¼š</p><table><thead><tr><th><strong>å±æ€§</strong></th><th><strong>ç±»å‹</strong></th><th><strong>å¿…é¡»æŒ‡å®š</strong></th><th><strong>é»˜è®¤å€¼</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>value</td><td>String</td><td>å¦</td><td>â€œâ€</td><td>è¡¨å</td></tr><tr><td>schema</td><td>String</td><td>å¦</td><td>â€œâ€</td><td>schema</td></tr><tr><td>keepGlobalPrefix</td><td>boolean</td><td>å¦</td><td>false</td><td>æ˜¯å¦ä¿æŒä½¿ç”¨å…¨å±€çš„ tablePrefix çš„å€¼ï¼ˆå½“å…¨å±€ tablePrefix ç”Ÿæ•ˆæ—¶ï¼‰</td></tr><tr><td>resultMap</td><td>String</td><td>å¦</td><td>â€œâ€</td><td>xml ä¸­ resultMap çš„ idï¼ˆç”¨äºæ»¡è¶³ç‰¹å®šç±»å‹çš„å®ä½“ç±»å¯¹è±¡ç»‘å®šï¼‰</td></tr><tr><td>autoResultMap</td><td>boolean</td><td>å¦</td><td>false</td><td>æ˜¯å¦è‡ªåŠ¨æ„å»º resultMap å¹¶ä½¿ç”¨ï¼ˆå¦‚æœè®¾ç½® resultMap åˆ™ä¸ä¼šè¿›è¡Œ resultMap çš„è‡ªåŠ¨æ„å»ºä¸æ³¨å…¥ï¼‰</td></tr><tr><td>excludeProperty</td><td>String[]</td><td>å¦</td><td>{}</td><td>éœ€è¦æ’é™¤çš„å±æ€§å @since 3.3.1</td></tr></tbody></table><h3 id="â‘¡-TableId"><a href="#â‘¡-TableId" class="headerlink" title="â‘¡ @TableId"></a>â‘¡ @TableId</h3><ul><li>æè¿°ï¼šä¸»é”®æ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»ä¸­çš„ä¸»é”®å­—æ®µ</li><li>ä½¿ç”¨ä½ç½®ï¼šå®ä½“ç±»çš„ä¸»é”®å­—æ®µ</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>TableId</strong> çš„å±æ€§ï¼š</p><table><thead><tr><th align="left"><strong>å±æ€§</strong></th><th align="left"><strong>ç±»å‹</strong></th><th align="left"><strong>å¿…é¡»æŒ‡å®š</strong></th><th align="left"><strong>é»˜è®¤å€¼</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">value</td><td align="left">String</td><td align="left">å¦</td><td align="left">â€œâ€</td><td align="left">è¡¨å</td></tr><tr><td align="left">type</td><td align="left">Enum</td><td align="left">å¦</td><td align="left">IdType.NONE</td><td align="left">æŒ‡å®šä¸»é”®ç±»å‹</td></tr></tbody></table><p>**IdType **æ”¯æŒçš„ç±»å‹æœ‰ï¼š</p><table><thead><tr><th align="left"><strong>å€¼</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">AUTO</td><td align="left">æ•°æ®åº“ ID è‡ªå¢</td></tr><tr><td align="left">NONE</td><td align="left">æ— çŠ¶æ€ï¼Œè¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹ï¼ˆæ³¨è§£é‡Œç­‰äºè·Ÿéšå…¨å±€ï¼Œå…¨å±€é‡Œçº¦ç­‰äº INPUTï¼‰</td></tr><tr><td align="left">INPUT</td><td align="left">insert å‰è‡ªè¡Œ set ä¸»é”®å€¼</td></tr><tr><td align="left">ASSIGN_ID</td><td align="left">åˆ†é… ID(ä¸»é”®ç±»å‹ä¸º Number(Long å’Œ Integer)æˆ– String)(since 3.3.0),ä½¿ç”¨æ¥å£IdentifierGeneratorçš„æ–¹æ³•nextId(é»˜è®¤å®ç°ç±»ä¸ºDefaultIdentifierGeneratoré›ªèŠ±ç®—æ³•)</td></tr><tr><td align="left">ASSIGN_UUID</td><td align="left">åˆ†é… UUID,ä¸»é”®ç±»å‹ä¸º String(since 3.3.0),ä½¿ç”¨æ¥å£IdentifierGeneratorçš„æ–¹æ³•nextUUID(é»˜è®¤ default æ–¹æ³•)</td></tr><tr><td align="left">ID_WORKER</td><td align="left">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ ID é•¿æ•´å‹ç±»å‹(please use ASSIGN_ID)</td></tr><tr><td align="left">UUID</td><td align="left">32 ä½ UUID å­—ç¬¦ä¸²(please use ASSIGN_UUID)</td></tr><tr><td align="left">ID_WORKER_STR</td><td align="left">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ ID å­—ç¬¦ä¸²ç±»å‹(please use ASSIGN_ID)</td></tr></tbody></table><p>è¿™é‡Œæ¯”è¾ƒå¸¸è§çš„æœ‰ä¸‰ç§ï¼š</p><ul><li><code>AUTO</code>ï¼šåˆ©ç”¨æ•°æ®åº“çš„idè‡ªå¢é•¿</li><li><code>INPUT</code>ï¼šæ‰‹åŠ¨ç”Ÿæˆid</li><li><code>ASSIGN_ID</code>ï¼šé›ªèŠ±ç®—æ³•ç”Ÿæˆ<code>Long</code>ç±»å‹çš„å…¨å±€å”¯ä¸€idï¼Œè¿™æ˜¯é»˜è®¤çš„IDç­–ç•¥</li></ul><h3 id="â‘¢-TableField"><a href="#â‘¢-TableField" class="headerlink" title="â‘¢ @TableField"></a>â‘¢ @TableField</h3><ul><li>æè¿°ï¼šæ™®é€šå­—æ®µçš„æ³¨è§£ï¼ˆä¸æ•°æ®åº“å­—æ®µåŒ¹é…ï¼‰</li><li>ä½¿ç”¨ä½ç½®ï¼š<code>PO</code> å®ä½“çš„æ™®é€šå­—æ®µ</li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="meta">@TableField(&quot;isMarried&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean isMarried;</span><br><span class="line">    <span class="meta">@TableField(&quot;concat&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String concat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>TableField</strong> çš„å±æ€§ï¼š</p><table><thead><tr><th><strong>å±æ€§</strong></th><th><strong>ç±»å‹</strong></th><th><strong>å¿…å¡«</strong></th><th><strong>é»˜è®¤å€¼</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>value</td><td>String</td><td>å¦</td><td>â€œâ€</td><td>æ•°æ®åº“å­—æ®µå€¼</td></tr><tr><td>exist</td><td>boolean</td><td>å¦</td><td>true</td><td>æ˜¯å¦ä¸ºæ•°æ®åº“è¡¨å­—æ®µ</td></tr><tr><td>condition</td><td>String</td><td>å¦</td><td>â€œâ€</td><td>å­—æ®µ where å®ä½“æŸ¥è¯¢æ¯”è¾ƒæ¡ä»¶ï¼Œæœ‰å€¼è®¾ç½®åˆ™æŒ‰è®¾ç½®çš„å€¼ä¸ºå‡†ï¼Œæ²¡æœ‰åˆ™ä¸ºé»˜è®¤å…¨å±€</td></tr><tr><td>update</td><td>String</td><td>å¦</td><td>â€œâ€</td><td>å­—æ®µ update set éƒ¨åˆ†æ³¨å…¥ï¼Œä¾‹å¦‚ï¼šå½“åœ¨versionå­—æ®µä¸Šæ³¨è§£update&#x3D;â€%s+1â€ è¡¨ç¤ºæ›´æ–°æ—¶ä¼š set version&#x3D;version+1 ï¼ˆè¯¥å±æ€§ä¼˜å…ˆçº§é«˜äº el å±æ€§ï¼‰</td></tr><tr><td>insertStrategy</td><td>Enum</td><td>å¦</td><td>FieldStrategy.DEFAULT</td><td>å­—æ®µéªŒè¯ç­–ç•¥ä¹‹ insert: å½“insertæ“ä½œæ—¶ï¼Œè¯¥å­—æ®µæ‹¼æ¥insertè¯­å¥æ—¶çš„ç­–ç•¥</td></tr><tr><td>updateStrategy</td><td>Enum</td><td>å¦</td><td>FieldStrategy.DEFAULT</td><td>å­—æ®µéªŒè¯ç­–ç•¥ä¹‹ update: å½“æ›´æ–°æ“ä½œæ—¶ï¼Œè¯¥å­—æ®µæ‹¼æ¥setè¯­å¥æ—¶çš„ç­–ç•¥</td></tr><tr><td>whereStrategy</td><td>Enum</td><td>å¦</td><td>FieldStrategy.DEFAULT</td><td>å­—æ®µéªŒè¯ç­–ç•¥ä¹‹ where: è¡¨ç¤ºè¯¥å­—æ®µåœ¨æ‹¼æ¥whereæ¡ä»¶æ—¶çš„ç­–ç•¥</td></tr><tr><td>fill</td><td>Enum</td><td>å¦</td><td>FieldFill.DEFAULT</td><td>å­—æ®µè‡ªåŠ¨å¡«å……ç­–ç•¥</td></tr><tr><td>select</td><td>boolean</td><td>å¦</td><td>true</td><td>æ˜¯å¦è¿›è¡Œ select æŸ¥è¯¢</td></tr><tr><td>keepGlobalFormat</td><td>boolean</td><td>å¦</td><td>false</td><td>æ˜¯å¦ä¿æŒä½¿ç”¨å…¨å±€çš„ format è¿›è¡Œå¤„ç†</td></tr><tr><td>jdbcType</td><td>JdbcType</td><td>å¦</td><td>JdbcType.UNDEFINED</td><td>JDBC ç±»å‹ (è¯¥é»˜è®¤å€¼ä¸ä»£è¡¨ä¼šæŒ‰ç…§è¯¥å€¼ç”Ÿæ•ˆ)</td></tr><tr><td>typeHandler</td><td>TypeHander</td><td>å¦</td><td></td><td>ç±»å‹å¤„ç†å™¨ (è¯¥é»˜è®¤å€¼ä¸ä»£è¡¨ä¼šæŒ‰ç…§è¯¥å€¼ç”Ÿæ•ˆ)</td></tr><tr><td>numericScale</td><td>String</td><td>å¦</td><td>â€œâ€</td><td>æŒ‡å®šå°æ•°ç‚¹åä¿ç•™çš„ä½æ•°</td></tr></tbody></table><h2 id="â…£-å¸¸è§é…ç½®"><a href="#â…£-å¸¸è§é…ç½®" class="headerlink" title="â…£ å¸¸è§é…ç½®"></a>â…£ å¸¸è§é…ç½®</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment"># å…¨å±€é…ç½®æ–‡ä»¶ä½ç½®ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line">  <span class="attr">config-location:</span> <span class="string">classpath:mybatis/mybatis-config.xml</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># Mapper XMLæ–‡ä»¶ä½ç½®</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/**/*.xml</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># é…ç½®å®ä½“ç±»æ‰€åœ¨çš„åŒ…åï¼ŒMyBatis-Plusä¼šè‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œä¸ºåˆ«å</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.example.yourproject.model</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># å…¨å±€é…ç½®</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span> <span class="comment"># å…¨å±€idç±»å‹ä¸ºè‡ªå¢é•¿</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tbl_</span> <span class="comment"># é…ç½®è¡¨å‰ç¼€</span></span><br><span class="line">    <span class="comment"># å¼€å¯é©¼å³°å‘½åè§„åˆ™è½¬æ¢</span></span><br><span class="line">    <span class="attr">capital-mode:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># é…ç½®é€»è¾‘åˆ é™¤ç›¸å…³å±æ€§</span></span><br><span class="line">    <span class="attr">logic-delete-field:</span> <span class="string">deleted</span></span><br><span class="line">    <span class="attr">logic-delete-value:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">logic-not-delete-value:</span> <span class="number">0</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># è‡ªå®šä¹‰æšä¸¾ç±»å‹è½¬æ¢å™¨</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># åˆ†é¡µæ’ä»¶é…ç½®</span></span><br><span class="line">  <span class="attr">pagination:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">page-size:</span> <span class="number">10</span></span><br><span class="line">    <span class="attr">reasonable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li><strong>config-location</strong> ï¼šç”¨äºæŒ‡å®š <strong>Mybatis</strong> é…ç½®æ–‡ä»¶çš„è·¯å¾„</li><li><strong>mapper-locations</strong> ï¼šé…ç½® <strong>Mapper</strong> <strong>XML</strong> æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®</li><li><strong>type-aliases-package</strong> ï¼šé…ç½®å®ä½“ç±»æ‰€åœ¨çš„åŒ…åï¼Œ<strong>MybatisPlus</strong> ä¼šè‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œä¸ºåˆ«å</li><li><strong>global-config</strong> ï¼šå…¨å±€é…ç½®</li><li><strong>configuration</strong> ï¼šè‡ªå®šä¹‰é…ç½®</li><li><strong>pagination</strong> ï¼šåˆ†é¡µæ’ä»¶é…ç½®</li></ul><p>å¤§å¤šæ•°çš„é…ç½®éƒ½æ˜¯æœ‰é»˜è®¤å€¼çš„ï¼Œå› æ­¤æˆ‘ä»¬éƒ½æ— éœ€é…ç½®ï¼Œä½†è¿˜æ˜¯æœ‰ä¸€äº›æ²¡æœ‰é»˜è®¤å€¼çš„ï¼Œä¾‹å¦‚ï¼š</p><ul><li>å®ä½“ç±»çš„åˆ«åæ‰«æåŒ…</li><li>å…¨å±€ <strong>id</strong> ç±»å‹</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.itheima.mp.domain.po</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span> <span class="comment"># å…¨å±€idç±»å‹ä¸ºè‡ªå¢é•¿</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ MybatisPlus ä¹Ÿæ”¯æŒæ‰‹å†™ SQL çš„ï¼Œè€Œ mapper æ–‡ä»¶çš„è¯»å–åœ°å€å¯ä»¥è‡ªå·±é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">&quot;classpath*:/mapper/**/*.xml&quot;</span> <span class="comment"># Mapper.xmlæ–‡ä»¶åœ°å€ï¼Œå½“å‰è¿™ä¸ªæ˜¯é»˜è®¤å€¼ã€‚</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°é»˜è®¤å€¼æ˜¯ <code>&quot;classpath*:/mapper/**/*.xml&quot;</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦æŠŠ Mapper.xml æ–‡ä»¶æ”¾åœ¨è¿™ä¸ªä½ç½®ä¸‹è¢«åŠ è½½</p><p>ä¾‹å¦‚ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v6.png" alt="yamlé…ç½®"></p><hr><h1 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½"></a>æ ¸å¿ƒåŠŸèƒ½</h1><h2 id="â… -æ¡ä»¶æ„é€ å™¨"><a href="#â… -æ¡ä»¶æ„é€ å™¨" class="headerlink" title="â…  æ¡ä»¶æ„é€ å™¨"></a>â…  æ¡ä»¶æ„é€ å™¨</h2><p>é™¤äº†æ–°å¢ä»¥å¤–ï¼Œä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢çš„ <strong>SQL</strong> è¯­å¥éƒ½éœ€è¦æŒ‡å®š <strong>where</strong> æ¡ä»¶ã€‚å› æ­¤ <strong>BaseMapper</strong> ä¸­æä¾›äº†äº†ç›¸å…³çš„æ–¹æ³•é™¤äº†æ”¯æŒ <strong>id</strong> è¿˜æ”¯æŒæ›´å¤æ‚çš„ <strong>where</strong> æ¡ä»¶ã€‚</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v7.png" alt="BaseMapper"></p><p>å‚æ•°ä¸­çš„ <strong>Wrapper</strong> å°±æ˜¯æ¡ä»¶æ„é€ çš„æŠ½è±¡ç±»ï¼Œå…¶ä¸‹æœ‰å¾ˆå¤šé»˜è®¤å®ç°ï¼Œç»§æ‰¿å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v8.png" alt="BaseMapper"></p><p><strong>Wrapper</strong> çš„å­ç±» <strong>AbstractWrapper</strong> æä¾›äº† <strong>where</strong> ä¸­æ‰€åŒ…å«çš„æ‰€æœ‰æ¡ä»¶æ„é€ æ–¹æ³•ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v9.png" alt="AbstractWrapper"></p><p>è€Œ <strong>QueryWrapper</strong> åœ¨ <strong>AbstractWrapper</strong>  åŸºç¡€ä¸Šæ‹“å±•äº†ä¸€ä¸ª select æ–¹æ³•ï¼Œç”¨äºæŒ‡å®šæŸ¥è¯¢å­—æ®µï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QueryWrapper</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">AbstractWrapper</span>&lt;T, String, QueryWrapper&lt;T&gt;&gt; <span class="keyword">implements</span> <span class="title class_">Query</span>&lt;QueryWrapper&lt;T&gt;, T, String&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SharedString sqlSelect;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>((Object)<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QueryWrapper</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlSelect = <span class="keyword">new</span> <span class="title class_">SharedString</span>();</span><br><span class="line">        <span class="built_in">super</span>.setEntity(entity);</span><br><span class="line">        <span class="built_in">super</span>.initNeed();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QueryWrapper</span><span class="params">(T entity, String... columns)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlSelect = <span class="keyword">new</span> <span class="title class_">SharedString</span>();</span><br><span class="line">        <span class="built_in">super</span>.setEntity(entity);</span><br><span class="line">        <span class="built_in">super</span>.initNeed();</span><br><span class="line">        <span class="built_in">this</span>.select(columns);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">QueryWrapper</span><span class="params">(T entity, Class&lt;T&gt; entityClass, AtomicInteger paramNameSeq, Map&lt;String, Object&gt; paramNameValuePairs, MergeSegments mergeSegments, SharedString paramAlias, SharedString lastSql, SharedString sqlComment, SharedString sqlFirst)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlSelect = <span class="keyword">new</span> <span class="title class_">SharedString</span>();</span><br><span class="line">        <span class="built_in">super</span>.setEntity(entity);</span><br><span class="line">        <span class="built_in">super</span>.setEntityClass(entityClass);</span><br><span class="line">        <span class="built_in">this</span>.paramNameSeq = paramNameSeq;</span><br><span class="line">        <span class="built_in">this</span>.paramNameValuePairs = paramNameValuePairs;</span><br><span class="line">        <span class="built_in">this</span>.expression = mergeSegments;</span><br><span class="line">        <span class="built_in">this</span>.paramAlias = paramAlias;</span><br><span class="line">        <span class="built_in">this</span>.lastSql = lastSql;</span><br><span class="line">        <span class="built_in">this</span>.sqlComment = sqlComment;</span><br><span class="line">        <span class="built_in">this</span>.sqlFirst = sqlFirst;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SafeVarargs</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> QueryWrapper&lt;T&gt; <span class="title function_">select</span><span class="params">(String... columns)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.select(Arrays.asList(columns));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> QueryWrapper&lt;T&gt; <span class="title function_">select</span><span class="params">(List&lt;String&gt; columns)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isNotEmpty(columns)) &#123;</span><br><span class="line">            <span class="built_in">this</span>.sqlSelect.setStringValue(String.join(<span class="string">&quot;,&quot;</span>, columns));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (QueryWrapper)<span class="built_in">this</span>.typedThis;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> QueryWrapper&lt;T&gt; <span class="title function_">select</span><span class="params">(Class&lt;T&gt; entityClass, Predicate&lt;TableFieldInfo&gt; predicate)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.setEntityClass(entityClass);</span><br><span class="line">        <span class="built_in">this</span>.sqlSelect.setStringValue(TableInfoHelper.getTableInfo(<span class="built_in">this</span>.getEntityClass()).chooseSelect(predicate));</span><br><span class="line">        <span class="keyword">return</span> (QueryWrapper)<span class="built_in">this</span>.typedThis;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSqlSelect</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.sqlSelect.getStringValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">columnSqlInjectFilter</span><span class="params">(String column)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> StringUtils.sqlInjectionReplaceBlank(column);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> LambdaQueryWrapper&lt;T&gt; <span class="title function_">lambda</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>(<span class="built_in">this</span>.getEntity(), <span class="built_in">this</span>.getEntityClass(), <span class="built_in">this</span>.sqlSelect, <span class="built_in">this</span>.paramNameSeq, <span class="built_in">this</span>.paramNameValuePairs, <span class="built_in">this</span>.expression, <span class="built_in">this</span>.paramAlias, <span class="built_in">this</span>.lastSql, <span class="built_in">this</span>.sqlComment, <span class="built_in">this</span>.sqlFirst);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> QueryWrapper&lt;T&gt; <span class="title function_">instance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>(<span class="built_in">this</span>.getEntity(), <span class="built_in">this</span>.getEntityClass(), <span class="built_in">this</span>.paramNameSeq, <span class="built_in">this</span>.paramNameValuePairs, <span class="keyword">new</span> <span class="title class_">MergeSegments</span>(), <span class="built_in">this</span>.paramAlias, SharedString.emptyString(), SharedString.emptyString(), SharedString.emptyString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.clear();</span><br><span class="line">        <span class="built_in">this</span>.sqlSelect.toNull();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œ <strong>UpdateWrapper</strong> åˆ™åœ¨ <strong>AbstractWrapper</strong>  åŸºç¡€ä¸Šæ‹“å±•äº†äº†ä¸€ä¸ª <strong>set</strong> æ–¹æ³•ï¼Œç”¨äºæŒ‡å®š <strong>SQL</strong> ä¸­çš„ <strong>SET</strong> éƒ¨åˆ†ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UpdateWrapper</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">AbstractWrapper</span>&lt;T, String, UpdateWrapper&lt;T&gt;&gt; <span class="keyword">implements</span> <span class="title class_">Update</span>&lt;UpdateWrapper&lt;T&gt;, String&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;String&gt; sqlSet;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UpdateWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>((Object)<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UpdateWrapper</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.setEntity(entity);</span><br><span class="line">        <span class="built_in">super</span>.initNeed();</span><br><span class="line">        <span class="built_in">this</span>.sqlSet = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">UpdateWrapper</span><span class="params">(T entity, List&lt;String&gt; sqlSet, AtomicInteger paramNameSeq, Map&lt;String, Object&gt; paramNameValuePairs, MergeSegments mergeSegments, SharedString paramAlias, SharedString lastSql, SharedString sqlComment, SharedString sqlFirst)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.setEntity(entity);</span><br><span class="line">        <span class="built_in">this</span>.sqlSet = sqlSet;</span><br><span class="line">        <span class="built_in">this</span>.paramNameSeq = paramNameSeq;</span><br><span class="line">        <span class="built_in">this</span>.paramNameValuePairs = paramNameValuePairs;</span><br><span class="line">        <span class="built_in">this</span>.expression = mergeSegments;</span><br><span class="line">        <span class="built_in">this</span>.paramAlias = paramAlias;</span><br><span class="line">        <span class="built_in">this</span>.lastSql = lastSql;</span><br><span class="line">        <span class="built_in">this</span>.sqlComment = sqlComment;</span><br><span class="line">        <span class="built_in">this</span>.sqlFirst = sqlFirst;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSqlSet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> CollectionUtils.isEmpty(<span class="built_in">this</span>.sqlSet) ? <span class="literal">null</span> : String.join(<span class="string">&quot;,&quot;</span>, <span class="built_in">this</span>.sqlSet);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> UpdateWrapper&lt;T&gt; <span class="title function_">set</span><span class="params">(<span class="type">boolean</span> condition, String column, Object val, String mapping)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (UpdateWrapper)<span class="built_in">this</span>.maybeDo(condition, () -&gt; &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="built_in">this</span>.formatParam(mapping, val);</span><br><span class="line">            <span class="built_in">this</span>.sqlSet.add(column + <span class="string">&quot;=&quot;</span> + sql);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> UpdateWrapper&lt;T&gt; <span class="title function_">setSql</span><span class="params">(<span class="type">boolean</span> condition, String sql)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (condition &amp;&amp; StringUtils.isNotBlank(sql)) &#123;</span><br><span class="line">            <span class="built_in">this</span>.sqlSet.add(sql);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (UpdateWrapper)<span class="built_in">this</span>.typedThis;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> String <span class="title function_">columnSqlInjectFilter</span><span class="params">(String column)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> StringUtils.sqlInjectionReplaceBlank(column);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> LambdaUpdateWrapper&lt;T&gt; <span class="title function_">lambda</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LambdaUpdateWrapper</span>(<span class="built_in">this</span>.getEntity(), <span class="built_in">this</span>.getEntityClass(), <span class="built_in">this</span>.sqlSet, <span class="built_in">this</span>.paramNameSeq, <span class="built_in">this</span>.paramNameValuePairs, <span class="built_in">this</span>.expression, <span class="built_in">this</span>.paramAlias, <span class="built_in">this</span>.lastSql, <span class="built_in">this</span>.sqlComment, <span class="built_in">this</span>.sqlFirst);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> UpdateWrapper&lt;T&gt; <span class="title function_">instance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>(<span class="built_in">this</span>.getEntity(), (List)<span class="literal">null</span>, <span class="built_in">this</span>.paramNameSeq, <span class="built_in">this</span>.paramNameValuePairs, <span class="keyword">new</span> <span class="title class_">MergeSegments</span>(), <span class="built_in">this</span>.paramAlias, SharedString.emptyString(), SharedString.emptyString(), SharedString.emptyString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.clear();</span><br><span class="line">        <span class="built_in">this</span>.sqlSet.clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="â‘ -QueryWrapper"><a href="#â‘ -QueryWrapper" class="headerlink" title="â‘  QueryWrapper"></a>â‘  QueryWrapper</h3><p>æ— è®ºæ˜¯ä¿®æ”¹ã€æ›´æ–°ã€æŸ¥è¯¢ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ QueryWrapper æ¥æ„å»ºæŸ¥è¯¢æ¡ä»¶ã€‚</p><p><strong>æŸ¥è¯¢ï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * â‘ æŸ¥è¯¢å‡ºåå­—ä¸­å¸¦oçš„,å­˜æ¬¾å¤§äºç­‰äº1000å…ƒçš„ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæŸ¥è¯¢æ¡ä»¶ where name like &quot;%o%&quot; AND balance &gt;= 1000</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;()</span><br><span class="line">            .select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;info&quot;</span>, <span class="string">&quot;balance&quot;</span>)</span><br><span class="line">            .like(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">            .ge(<span class="string">&quot;balance&quot;</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ›´æ–°ï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * â‘¡æ›´æ–°ç”¨æˆ·åä¸ºJackçš„ç”¨æˆ·ä½™é¢ä¸º2000</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateByQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæŸ¥è¯¢æ¡ä»¶ where name = &quot;Jack&quot;</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().eq(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;Jack&quot;</span>);</span><br><span class="line">    <span class="comment">// 2.æ›´æ–°æ•°æ®ï¼Œuserä¸­énullå­—æ®µéƒ½ä¼šä½œä¸ºsetè¯­å¥</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setBalance(<span class="number">2000</span>);</span><br><span class="line">    userMapper.update(user, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="â‘¡-UpdateWrapper"><a href="#â‘¡-UpdateWrapper" class="headerlink" title="â‘¡ UpdateWrapper"></a>â‘¡ UpdateWrapper</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * â‘¢åŸºäºUpdateWrapperçš„æ›´æ–° æ›´æ–°idä¸º1ã€2ã€4çš„ç”¨æˆ·ä½™é¢,æ‰£200</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    userMapper.update(<span class="literal">null</span>, Wrappers.&lt;UserEntity&gt;update().lambda()</span><br><span class="line">            .setSql(<span class="string">&quot;balance = balance - 200&quot;</span>)</span><br><span class="line">            .in(UserEntity::getId, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="â‘¢-LambdaQueryWrapper"><a href="#â‘¢-LambdaQueryWrapper" class="headerlink" title="â‘¢ LambdaQueryWrapper"></a>â‘¢ LambdaQueryWrapper</h3><p>å…¶ä¸­ä¸€ç§åŠæ³•æ˜¯åŸºäºå˜é‡çš„ <strong>gettter</strong> æ–¹æ³•ç»“åˆåå°„æŠ€æœ¯ã€‚å› æ­¤æˆ‘ä»¬åªè¦å°†æ¡ä»¶å¯¹åº”çš„å­—æ®µçš„ <strong>gettter</strong> æ–¹æ³•ä¼ é€’ç»™ <strong>MybatisPlus</strong> ï¼Œå®ƒå°±èƒ½è®¡ç®—å‡ºå¯¹åº”çš„å˜é‡åäº†ã€‚è€Œä¼ é€’æ–¹æ³•å¯ä»¥ä½¿ç”¨ <strong>JDK8</strong> ä¸­çš„<code>æ–¹æ³•å¼•ç”¨</code>å’Œ <strong>Lambda</strong> è¡¨è¾¾å¼ã€‚ å› æ­¤ <strong>MybatisPlus</strong> åˆæä¾›äº†ä¸€å¥—åŸºäº <strong>Lambda</strong> çš„ <strong>Wrapper</strong> ï¼ŒåŒ…å«ä¸¤ä¸ªï¼š</p><ul><li><strong>LambdaQueryWrapper</strong></li><li><strong>LambdaUpdateWrapper</strong></li></ul><p>åˆ†åˆ«å¯¹åº” <strong>QueryWrapper</strong> å’Œ <strong>UpdateWrappe</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * â‘ æŸ¥è¯¢å‡ºåå­—ä¸­å¸¦oçš„,å­˜æ¬¾å¤§äºç­‰äº1000å…ƒçš„ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQueryMapper</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;UserEntity&gt; userEntityList = userMapper.selectList(Wrappers.lambdaQuery(UserEntity.class)</span><br><span class="line">            .like(UserEntity::getUsername, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">            .ge(UserEntity::getBalance, <span class="number">1000</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;userEntityList ===&gt; &quot;</span>+userEntityList);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * â‘¡æ›´æ–°ç”¨æˆ·åä¸ºJackçš„ç”¨æˆ·ä½™é¢ä¸º2000</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateMapper</span><span class="params">()</span> &#123;</span><br><span class="line">    userMapper.update(Wrappers.lambdaUpdate(UserEntity.class)</span><br><span class="line">            .set(UserEntity::getBalance, <span class="number">2000</span>)</span><br><span class="line">            .eq(UserEntity::getUsername, <span class="string">&quot;Jack&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * â‘¢åŸºäºUpdateWrapperçš„æ›´æ–° æ›´æ–°idä¸º1ã€2ã€4çš„ç”¨æˆ·ä½™é¢,æ‰£200</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    userMapper.update(<span class="literal">null</span>, Wrappers.&lt;UserEntity&gt;update().lambda()</span><br><span class="line">            .setSql(<span class="string">&quot;balance = balance - 200&quot;</span>)</span><br><span class="line">            .in(UserEntity::getId, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="â…¡-è‡ªå®šä¹‰-SQL"><a href="#â…¡-è‡ªå®šä¹‰-SQL" class="headerlink" title="â…¡ è‡ªå®šä¹‰ SQL"></a>â…¡ è‡ªå®šä¹‰ SQL</h2><p><strong>MybatisPlus</strong> æä¾›äº†è‡ªå®šä¹‰ <strong>SQL</strong> åŠŸèƒ½ï¼Œå¯ä»¥è®©æˆ‘ä»¬å…ˆåˆ©ç”¨ <strong>Wrapper</strong> æ¥æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œç„¶åå†ç»“åˆ <strong>Mapper.xml</strong> æ¥ç¼–å†™ <strong>SQL</strong></p><h3 id="â‘ -åŸºæœ¬ç”¨æ³•"><a href="#â‘ -åŸºæœ¬ç”¨æ³•" class="headerlink" title="â‘  åŸºæœ¬ç”¨æ³•"></a>â‘  åŸºæœ¬ç”¨æ³•</h3><p>å…ˆæ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰SQL</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCustomWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.å‡†å¤‡è‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    List&lt;Long&gt; ids = List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>);</span><br><span class="line">    <span class="comment">// 2ã€å®šä¹‰æ¡ä»¶</span></span><br><span class="line">    QueryWrapper&lt;UserEntity&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;UserEntity&gt;().in(<span class="string">&quot;id&quot;</span>, ids);</span><br><span class="line">    <span class="comment">// 3.è°ƒç”¨mapperçš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œç›´æ¥ä¼ é€’Wrapper</span></span><br><span class="line">    userMapper.deductBalanceByIds(<span class="number">200</span>, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†åœ¨ <strong>UserMapper</strong> ä¸­å®šä¹‰ <strong>SQL</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;UserEntity&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;UPDATE user SET balance = balance - #&#123;money&#125; $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deductBalanceByIds</span><span class="params">(<span class="meta">@Param(&quot;money&quot;)</span> <span class="type">int</span> money, <span class="meta">@Param(&quot;ew&quot;)</span> QueryWrapper&lt;UserEntity&gt; wrapper)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="â‘¡-å¤šè¡¨å…³è”"><a href="#â‘¡-å¤šè¡¨å…³è”" class="headerlink" title="â‘¡ å¤šè¡¨å…³è”"></a>â‘¡ å¤šè¡¨å…³è”</h3><p>ç†è®ºä¸Šæ¥è¯´ <strong>MybatisPlus</strong> æ˜¯å•è¡¨æ“ä½œä¸æ”¯æŒå¤šè¡¨å…³è”çš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <strong>Wrapper</strong> ä¸­è‡ªå®šä¹‰æ¡ä»¶ç»“åˆè‡ªå®šä¹‰ <strong>SQL</strong> æ¥å®ç°å¤šè¡¨æŸ¥è¯¢çš„æ•ˆæœã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦æŸ¥å‡ºæ‰€æœ‰æ”¶è·åœ°å€åœ¨åŒ—äº¬å¹¶ä¸”ç”¨æˆ· <strong>id</strong> åœ¨ 1ã€2ã€4 çš„ç”¨æˆ·</p><p>å¦‚æœæ˜¯åŸºäº <strong>mybatis</strong> å®ç° <strong>SQL</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserByIdAndAddr&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.mp.domain.po.User&quot;</span>&gt;</span></span><br><span class="line">      SELECT *</span><br><span class="line">      FROM user u</span><br><span class="line">      INNER JOIN address a ON u.id = a.user_id</span><br><span class="line">      WHERE u.id</span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;IN (&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">          #&#123;id&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">      AND a.city = #&#123;city&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ <strong>SQL</strong> ç»“åˆ <strong>Wrapper</strong> ï¼š</p><p>å…ˆæ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCustomJoinWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.å‡†å¤‡è‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;()</span><br><span class="line">            .in(<span class="string">&quot;u.id&quot;</span>, List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>))</span><br><span class="line">            .eq(<span class="string">&quot;a.city&quot;</span>, <span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.è°ƒç”¨mapperçš„è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.queryUserByWrapper(wrapper);</span><br><span class="line"></span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†åœ¨ <strong>UserMapper</strong> ä¸­è‡ªå®šä¹‰ <strong>SQL</strong> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;SELECT u.* FROM user u INNER JOIN address a ON u.id = a.user_id $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">queryUserByWrapper</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span>QueryWrapper&lt;User&gt; wrapper)</span>;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨ <strong>UserMapper.xml</strong> ä¸­å†™ <strong>SQL</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserByIdAndAddr&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.mp.domain.po.User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM user u INNER JOIN address a ON u.id = a.user_id $&#123;ew.customSqlSegment&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="â…¢-Service-æ¥å£"><a href="#â…¢-Service-æ¥å£" class="headerlink" title="â…¢ Service æ¥å£"></a>â…¢ Service æ¥å£</h2><p>é€šç”¨æ¥å£ä¸º <strong>Iservice</strong> ï¼Œé»˜è®¤å®ç°ä¸º **ServiceImpl **ï¼Œå…¶ä¸­å°è£…æ–¹æ³•ä¸ºä¸€ä¸‹å‡ ç±»ï¼š</p><ul><li><code>save</code>ï¼šæ–°å¢</li><li><code>remove</code>ï¼šåˆ é™¤</li><li><code>update</code>ï¼šæ›´æ–°</li><li><code>get</code>ï¼šæŸ¥è¯¢å•ä¸ªç»“æœ</li><li><code>list</code>ï¼šæŸ¥è¯¢é›†åˆç»“æœ</li><li><code>count</code>ï¼šè®¡æ•°</li><li><code>page</code>ï¼šåˆ†é¡µæŸ¥è¯¢</li></ul><h3 id="â‘ -CRUD"><a href="#â‘ -CRUD" class="headerlink" title="â‘  CRUD"></a>â‘  CRUD</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IService</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">DEFAULT_BATCH_SIZE</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// save æ–°å¢</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.retBool(<span class="built_in">this</span>.getBaseMapper().insert(entity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">        rollbackFor = &#123;Exception.class&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.saveBatch(entityList, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">        rollbackFor = &#123;Exception.class&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.saveOrUpdateBatch(entityList, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(Serializable id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.retBool(<span class="built_in">this</span>.getBaseMapper().deleteById(id));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// remove åˆ é™¤</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(Serializable id, <span class="type">boolean</span> useFill)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>(<span class="string">&quot;ä¸æ”¯æŒçš„æ–¹æ³•!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.retBool(<span class="built_in">this</span>.getBaseMapper().deleteById(entity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">removeByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span> &#123;</span><br><span class="line">        Assert.notEmpty(columnMap, <span class="string">&quot;error: columnMap must not be empty&quot;</span>, <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.retBool(<span class="built_in">this</span>.getBaseMapper().deleteByMap(columnMap));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.retBool(<span class="built_in">this</span>.getBaseMapper().delete(queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">removeByIds</span><span class="params">(Collection&lt;?&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> CollectionUtils.isEmpty(list) ? <span class="literal">false</span> : SqlHelper.retBool(<span class="built_in">this</span>.getBaseMapper().deleteBatchIds(list));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">        rollbackFor = &#123;Exception.class&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">removeByIds</span><span class="params">(Collection&lt;?&gt; list, <span class="type">boolean</span> useFill)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isEmpty(list)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> useFill ? <span class="built_in">this</span>.removeBatchByIds(list, <span class="literal">true</span>) : SqlHelper.retBool(<span class="built_in">this</span>.getBaseMapper().deleteBatchIds(list));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">        rollbackFor = &#123;Exception.class&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">removeBatchByIds</span><span class="params">(Collection&lt;?&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.removeBatchByIds(list, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">        rollbackFor = &#123;Exception.class&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">removeBatchByIds</span><span class="params">(Collection&lt;?&gt; list, <span class="type">boolean</span> useFill)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.removeBatchByIds(list, <span class="number">1000</span>, useFill);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">removeBatchByIds</span><span class="params">(Collection&lt;?&gt; list, <span class="type">int</span> batchSize)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>(<span class="string">&quot;ä¸æ”¯æŒçš„æ–¹æ³•!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">removeBatchByIds</span><span class="params">(Collection&lt;?&gt; list, <span class="type">int</span> batchSize, <span class="type">boolean</span> useFill)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>(<span class="string">&quot;ä¸æ”¯æŒçš„æ–¹æ³•!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// update ä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">updateById</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.retBool(<span class="built_in">this</span>.getBaseMapper().updateById(entity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(Wrapper&lt;T&gt; updateWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.update((Object)<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(T entity, Wrapper&lt;T&gt; updateWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.retBool(<span class="built_in">this</span>.getBaseMapper().update(entity, updateWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">        rollbackFor = &#123;Exception.class&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.updateBatchById(entityList, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">saveOrUpdate</span><span class="params">(T entity)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get æŸ¥è¯¢å•ä¸ªç»“æœ</span></span><br><span class="line">    <span class="keyword">default</span> T <span class="title function_">getById</span><span class="params">(Serializable id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getBaseMapper().selectById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// list æŸ¥è¯¢é›†åˆç»“æœ</span></span><br><span class="line">    <span class="keyword">default</span> List&lt;T&gt; <span class="title function_">listByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; idList)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getBaseMapper().selectBatchIds(idList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> List&lt;T&gt; <span class="title function_">listByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getBaseMapper().selectByMap(columnMap);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get æŸ¥è¯¢å•ä¸ªç»“æœå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">default</span> T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getOne(queryWrapper, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    T <span class="title function_">getOne</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, <span class="type">boolean</span> throwEx)</span>;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; <span class="title function_">getMap</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">    &lt;V&gt; V <span class="title function_">getObj</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// count è®¡æ•°</span></span><br><span class="line">    <span class="keyword">default</span> <span class="type">long</span> <span class="title function_">count</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.count(Wrappers.emptyWrapper());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">long</span> <span class="title function_">count</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.retCount(<span class="built_in">this</span>.getBaseMapper().selectCount(queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// list æŸ¥è¯¢é›†åˆç»“æœ</span></span><br><span class="line">    <span class="keyword">default</span> List&lt;T&gt; <span class="title function_">list</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getBaseMapper().selectList(queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> List&lt;T&gt; <span class="title function_">list</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.list(Wrappers.emptyWrapper());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Ipage åˆ†é¡µ</span></span><br><span class="line">    <span class="keyword">default</span> &lt;E <span class="keyword">extends</span> <span class="title class_">IPage</span>&lt;T&gt;&gt; E <span class="title function_">page</span><span class="params">(E page, Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getBaseMapper().selectPage(page, queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> &lt;E <span class="keyword">extends</span> <span class="title class_">IPage</span>&lt;T&gt;&gt; E <span class="title function_">page</span><span class="params">(E page)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.page(page, Wrappers.emptyWrapper());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// list æŸ¥è¯¢é›†åˆç»“æœ</span></span><br><span class="line">    <span class="keyword">default</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getBaseMapper().selectMaps(queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.listMaps(Wrappers.emptyWrapper());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> List&lt;Object&gt; <span class="title function_">listObjs</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.listObjs(Function.identity());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> &lt;V&gt; List&lt;V&gt; <span class="title function_">listObjs</span><span class="params">(Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.listObjs(Wrappers.emptyWrapper(), mapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> List&lt;Object&gt; <span class="title function_">listObjs</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.listObjs(queryWrapper, Function.identity());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> &lt;V&gt; List&lt;V&gt; <span class="title function_">listObjs</span><span class="params">(Wrapper&lt;T&gt; queryWrapper, Function&lt;? <span class="built_in">super</span> Object, V&gt; mapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (List)<span class="built_in">this</span>.getBaseMapper().selectObjs(queryWrapper).stream().filter(Objects::nonNull).map(mapper).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Ipage åˆ†é¡µ</span></span><br><span class="line">    <span class="keyword">default</span> &lt;E <span class="keyword">extends</span> <span class="title class_">IPage</span>&lt;Map&lt;String, Object&gt;&gt;&gt; E <span class="title function_">pageMaps</span><span class="params">(E page, Wrapper&lt;T&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.getBaseMapper().selectMapsPage(page, queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> &lt;E <span class="keyword">extends</span> <span class="title class_">IPage</span>&lt;Map&lt;String, Object&gt;&gt;&gt; E <span class="title function_">pageMaps</span><span class="params">(E page)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.pageMaps(page, Wrappers.emptyWrapper());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    BaseMapper&lt;T&gt; <span class="title function_">getBaseMapper</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;T&gt; <span class="title function_">getEntityClass</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> QueryChainWrapper&lt;T&gt; <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.queryChain(<span class="built_in">this</span>.getBaseMapper());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> LambdaQueryChainWrapper&lt;T&gt; <span class="title function_">lambdaQuery</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.lambdaQueryChain(<span class="built_in">this</span>.getBaseMapper(), <span class="built_in">this</span>.getEntityClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> LambdaQueryChainWrapper&lt;T&gt; <span class="title function_">lambdaQuery</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.lambdaQueryChain(<span class="built_in">this</span>.getBaseMapper(), entity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> KtQueryChainWrapper&lt;T&gt; <span class="title function_">ktQuery</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.ktQueryChain(<span class="built_in">this</span>.getBaseMapper(), <span class="built_in">this</span>.getEntityClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> KtUpdateChainWrapper&lt;T&gt; <span class="title function_">ktUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.ktUpdateChain(<span class="built_in">this</span>.getBaseMapper(), <span class="built_in">this</span>.getEntityClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> UpdateChainWrapper&lt;T&gt; <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.updateChain(<span class="built_in">this</span>.getBaseMapper());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> LambdaUpdateChainWrapper&lt;T&gt; <span class="title function_">lambdaUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.lambdaUpdateChain(<span class="built_in">this</span>.getBaseMapper());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">saveOrUpdate</span><span class="params">(T entity, Wrapper&lt;T&gt; updateWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.update(entity, updateWrapper) || <span class="built_in">this</span>.saveOrUpdate(entity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ–°å¢ï¼š</strong></p><ul><li><code>save</code>æ˜¯æ–°å¢å•ä¸ªå…ƒç´ </li><li><code>saveBatch</code>æ˜¯æ‰¹é‡æ–°å¢</li><li><code>saveOrUpdate</code>æ˜¯æ ¹æ®idåˆ¤æ–­ï¼Œå¦‚æœæ•°æ®å­˜åœ¨å°±æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™æ–°å¢</li><li><code>saveOrUpdateBatch</code>æ˜¯æ‰¹é‡çš„æ–°å¢æˆ–ä¿®æ”¹</li></ul><p><strong>åˆ é™¤ï¼š</strong></p><ul><li><code>removeById</code>ï¼šæ ¹æ®idåˆ é™¤</li><li><code>removeByIds</code>ï¼šæ ¹æ®idæ‰¹é‡åˆ é™¤</li><li><code>removeByMap</code>ï¼šæ ¹æ®Mapä¸­çš„é”®å€¼å¯¹ä¸ºæ¡ä»¶åˆ é™¤</li><li><code>remove(Wrapper&lt;T&gt;)</code>ï¼šæ ¹æ®Wrapperæ¡ä»¶åˆ é™¤</li><li><code>~~removeBatchByIds~~</code>ï¼šæš‚ä¸æ”¯æŒ</li></ul><p><strong>ä¿®æ”¹ï¼š</strong></p><ul><li><code>updateById</code>ï¼šæ ¹æ®idä¿®æ”¹</li><li><code>update(Wrapper&lt;T&gt;)</code>ï¼šæ ¹æ®<code>UpdateWrapper</code>ä¿®æ”¹ï¼Œ<code>Wrapper</code>ä¸­åŒ…å«<code>set</code>å’Œ<code>where</code>éƒ¨åˆ†</li><li><code>update(Tï¼ŒWrapper&lt;T&gt;)</code>ï¼šæŒ‰ç…§<code>T</code>å†…çš„æ•°æ®ä¿®æ”¹ä¸<code>Wrapper</code>åŒ¹é…åˆ°çš„æ•°æ®</li><li><code>updateBatchById</code>ï¼šæ ¹æ®idæ‰¹é‡ä¿®æ”¹</li></ul><p><strong>Getï¼š</strong></p><ul><li><code>getById</code>ï¼šæ ¹æ®idæŸ¥è¯¢1æ¡æ•°æ®</li><li><code>getOne(Wrapper&lt;T&gt;)</code>ï¼šæ ¹æ®<code>Wrapper</code>æŸ¥è¯¢1æ¡æ•°æ®</li><li><code>getBaseMapper</code>ï¼šè·å–<code>Service</code>å†…çš„<code>BaseMapper</code>å®ç°ï¼ŒæŸäº›æ—¶å€™éœ€è¦ç›´æ¥è°ƒç”¨<code>Mapper</code>å†…çš„è‡ªå®šä¹‰<code>SQL</code>æ—¶å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•è·å–åˆ°<code>Mapper</code></li></ul><p><strong>Listï¼š</strong></p><ul><li><code>listByIds</code>ï¼šæ ¹æ®idæ‰¹é‡æŸ¥è¯¢</li><li><code>list(Wrapper&lt;T&gt;)</code>ï¼šæ ¹æ®Wrapperæ¡ä»¶æŸ¥è¯¢å¤šæ¡æ•°æ®</li><li><code>list()</code>ï¼šæŸ¥è¯¢æ‰€æœ‰</li></ul><p><strong>Count</strong>ï¼š</p><ul><li><code>count()</code>ï¼šç»Ÿè®¡æ‰€æœ‰æ•°é‡</li><li><code>count(Wrapper&lt;T&gt;)</code>ï¼šç»Ÿè®¡ç¬¦åˆ<code>Wrapper</code>æ¡ä»¶çš„æ•°æ®æ•°é‡</li></ul><p><strong>getBaseMapper</strong>ï¼š</p><ul><li>å½“æˆ‘ä»¬åœ¨serviceä¸­è¦è°ƒç”¨Mapperä¸­è‡ªå®šä¹‰SQLæ—¶ï¼Œå°±å¿…é¡»è·å–serviceå¯¹åº”çš„Mapperï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•</li></ul><h3 id="â‘¡-åŸºæœ¬ç”¨æ³•"><a href="#â‘¡-åŸºæœ¬ç”¨æ³•" class="headerlink" title="â‘¡ åŸºæœ¬ç”¨æ³•"></a>â‘¡ åŸºæœ¬ç”¨æ³•</h3><p>é¦–å…ˆï¼Œå®šä¹‰ <strong>IUserService</strong> ï¼Œç»§æ‰¿ <strong>IService</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="comment">// æ‹“å±•è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œç¼–å†™ <strong>UserServiceImpl</strong> ç±»ï¼Œç»§æ‰¿ <strong>ServiceImpl</strong> ï¼Œå®ç° <strong>UserService</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt;<span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v10.png" alt="AbstractWrapper"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¿«é€Ÿå®ç°ä¸‹é¢4ä¸ªæ¥å£ï¼š</p><table><thead><tr><th align="left"><strong>ç¼–å·</strong></th><th align="left"><strong>æ¥å£</strong></th><th align="left"><strong>è¯·æ±‚æ–¹å¼</strong></th><th align="left"><strong>è¯·æ±‚è·¯å¾„</strong></th><th align="left"><strong>è¯·æ±‚å‚æ•°</strong></th><th align="left"><strong>è¿”å›å€¼</strong></th></tr></thead><tbody><tr><td align="left">1</td><td align="left">æ–°å¢ç”¨æˆ·</td><td align="left">POST</td><td align="left">&#x2F;users</td><td align="left">ç”¨æˆ·è¡¨å•å®ä½“</td><td align="left">æ— </td></tr><tr><td align="left">2</td><td align="left">åˆ é™¤ç”¨æˆ·</td><td align="left">DELETE</td><td align="left">&#x2F;users&#x2F;{id}</td><td align="left">ç”¨æˆ·id</td><td align="left">æ— </td></tr><tr><td align="left">3</td><td align="left">æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</td><td align="left">GET</td><td align="left">&#x2F;users&#x2F;{id}</td><td align="left">ç”¨æˆ·id</td><td align="left">ç”¨æˆ·VO</td></tr><tr><td align="left">4</td><td align="left">æ ¹æ®idæ‰¹é‡æŸ¥è¯¢</td><td align="left">GET</td><td align="left">&#x2F;users</td><td align="left">ç”¨æˆ·idé›†åˆ</td><td align="left">ç”¨æˆ·VOé›†åˆ</td></tr></tbody></table><p>ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œå¼•å…¥ <strong>swagger-knife4jï¼š</strong></p><p>ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--swagger--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.xiaoymin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>knife4j-openapi2-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--web--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>yml</strong> æ–‡ä»¶ä¸­ <strong>swagger</strong> é…ç½®</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">openapi:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">ç”¨æˆ·ç®¡ç†æ¥å£æ–‡æ¡£</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;ç”¨æˆ·ç®¡ç†æ¥å£æ–‡æ¡£&quot;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">xxx@qq.com</span></span><br><span class="line">    <span class="attr">concat:</span> <span class="string">violet</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://violet.zeabur.app/</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">v1.0.0</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">group-name:</span> <span class="string">default</span></span><br><span class="line">        <span class="attr">api-rule:</span> <span class="string">package</span></span><br><span class="line">        <span class="attr">api-rule-resources:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">com.mybatisplus.controller</span></span><br></pre></td></tr></table></figure><p><strong>UserControllerï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lixuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2024/8/7 17:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="meta">@Tag(name = &quot;ç”¨æˆ·æ§åˆ¶å™¨&quot;)</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(UserController.class);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IUserService userService;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IAddressService addressService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/getUser/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æŸ¥è¯¢ç”¨æˆ· getUser/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> UserVO <span class="title function_">getUser</span><span class="params">(<span class="meta">@Parameter(description = &quot;ç”¨æˆ·ID&quot;)</span> <span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">        <span class="type">UserEntity</span> <span class="variable">userEntity</span> <span class="operator">=</span> userService.getById(id);</span><br><span class="line">        <span class="keyword">return</span> BeanUtil.copyProperties(userEntity, UserVO.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/getAllUser&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ· getAllUser&quot;, ignoreJsonView = true)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;UserVO&gt; <span class="title function_">getAllUser</span><span class="params">(<span class="meta">@ParameterObject</span> UserEntity userEntity)</span> &#123;</span><br><span class="line">        QueryWrapper&lt;UserEntity&gt; queryWrapper = ConditionUtil.buildQueryWrapper(userEntity, UserEntity.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;queryWrapper ===&gt; &quot;</span>+queryWrapper);</span><br><span class="line">        List&lt;UserEntity&gt; userEntityList = userService.list(queryWrapper);</span><br><span class="line">        List&lt;UserVO&gt; userVOS = BeanUtil.copyToList(userEntityList, UserVO.class);</span><br><span class="line">        userVOS.forEach(userVO -&gt; System.out.println(userVO.getUsername()));</span><br><span class="line">        <span class="keyword">return</span> BeanUtil.copyToList(userEntityList, UserVO.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/getUserByPage&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;åˆ†é¡µæŸ¥è¯¢ getUserByPage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Page&lt;UserEntity&gt; <span class="title function_">getUserByPage</span><span class="params">(<span class="meta">@ParameterObject</span> UserEntity userEntity,<span class="meta">@ParameterObject</span> Query query)</span> &#123;</span><br><span class="line">        QueryWrapper&lt;UserEntity&gt; queryWrapper = ConditionUtil.buildQueryWrapper(userEntity, UserEntity.class);</span><br><span class="line">        Page&lt;UserEntity&gt; page = userService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(query.getCurrent(), query.getSize()), queryWrapper);</span><br><span class="line">        System.out.println(<span class="string">&quot;page ===&gt; &quot;</span>+page);</span><br><span class="line">        <span class="keyword">return</span> userService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(query.getCurrent(), query.getSize()), queryWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/addUser&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ–°å¢ç”¨æˆ· addUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addUser</span><span class="params">(<span class="meta">@RequestBody</span> UserDTO userDTO)</span> &#123;</span><br><span class="line">        <span class="comment">//1ã€æŠŠDTOè½¬æ¢ä¸ºå®ä½“Entity</span></span><br><span class="line">        <span class="type">UserEntity</span> <span class="variable">userEntity</span> <span class="operator">=</span> BeanUtil.copyProperties(userDTO, UserEntity.class);</span><br><span class="line">        <span class="keyword">return</span> userService.save(userEntity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/updateUser&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;ä¿®æ”¹ç”¨æˆ· updateUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">updateUser</span><span class="params">(<span class="meta">@RequestBody</span> UserEntity userEntity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.updateById(userEntity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/deleteUser&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;åˆ é™¤ç”¨æˆ· deleteUser&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">deleteUser</span><span class="params">(<span class="meta">@RequestParam</span> Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.removeById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡åˆ é™¤ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/deleteUserBatch&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ‰¹é‡åˆ é™¤ç”¨æˆ· deleteUserBatch&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">deleteUserBatch</span><span class="params">(<span class="meta">@RequestParam</span> List&lt;Long&gt; ids)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.removeByIds(ids);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰£å‡ç”¨æˆ·ä½™é¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/&#123;id&#125;/deduction/&#123;money&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ‰£å‡ç”¨æˆ·ä½™é¢ &#123;id&#125;/deduction/&#123;money&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">deductBalance</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@Parameter(description = &quot;ç”¨æˆ·id&quot;)</span> <span class="meta">@PathVariable(&quot;id&quot;)</span> Long id,</span></span><br><span class="line"><span class="params">            <span class="meta">@Parameter(description = &quot;æ‰£å‡é‡‘é¢&quot;)</span> <span class="meta">@PathVariable(&quot;money&quot;)</span> Integer money)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.deductBalance(id, money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢ç”¨æˆ·å¹¶ä¸”å¯¹åº”å…¶åœ°å€è¶³è¿¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/getUserAndAddress/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æŸ¥è¯¢ç”¨æˆ·å¹¶ä¸”å¯¹åº”å…¶åœ°å€è¶³è¿¹ getUserAndAddress/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> UserVO <span class="title function_">getUserAndAddress</span><span class="params">(<span class="meta">@Parameter(description = &quot;ç”¨æˆ·ID&quot;)</span> <span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–ç”¨æˆ·</span></span><br><span class="line">        <span class="type">UserEntity</span> <span class="variable">userEntity</span> <span class="operator">=</span> userService.getById(id);</span><br><span class="line">        <span class="keyword">if</span> (userEntity == <span class="literal">null</span> || userEntity.getStatus() == UserStatus.FREEZE) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·çŠ¶æ€å¼‚å¸¸ï¼ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è½¬æ¢Vo</span></span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> BeanUtil.copyProperties(userEntity, UserVO.class);</span><br><span class="line">        <span class="comment">//è·å–åœ°å€åˆ—è¡¨</span></span><br><span class="line">        List&lt;AddressEntity&gt; addressEntityList = addressService.list(Wrappers.lambdaQuery(AddressEntity.class)</span><br><span class="line">                .eq(AddressEntity::getUserId, id));</span><br><span class="line">        <span class="comment">//è½¬æ¢åˆ—è¡¨VO</span></span><br><span class="line">        <span class="keyword">if</span> (CollUtil.isNotEmpty(addressEntityList)) &#123;</span><br><span class="line">            List&lt;AddressVO&gt; addressVOList = BeanUtil.copyToList(addressEntityList, AddressVO.class);</span><br><span class="line">            userVO.setAddressList(addressVOList);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> userVO;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idsæ‰¹é‡æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/getUserByIds&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æ ¹æ®idsæ‰¹é‡æŸ¥è¯¢ getUserByIds&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;UserVO&gt; <span class="title function_">getUserByIds</span><span class="params">(<span class="meta">@RequestParam</span> List&lt;Long&gt; ids)</span> &#123;</span><br><span class="line">        <span class="comment">//1ã€æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        List&lt;UserEntity&gt; userEntityList = userService.listByIds(ids);</span><br><span class="line">        <span class="keyword">if</span> (CollUtil.isEmpty(userEntityList)) &#123;</span><br><span class="line">            <span class="keyword">return</span> Collections.emptyList();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2æŸ¥è¯¢åœ°å€åˆ—è¡¨</span></span><br><span class="line">        List&lt;AddressEntity&gt; addressEntityList = addressService.list(Wrappers.lambdaQuery(AddressEntity.class)</span><br><span class="line">                .in(AddressEntity::getUserId, ids));</span><br><span class="line">        <span class="comment">//è½¬ä¸ºVoåˆ—è¡¨</span></span><br><span class="line">        List&lt;UserVO&gt; userVOList = BeanUtil.copyToList(userEntityList, UserVO.class);</span><br><span class="line">        <span class="comment">//æ ¹æ®UserIdè½¬ä¸ºMap</span></span><br><span class="line">        Map&lt;Long, List&lt;AddressEntity&gt;&gt; addressEntityMap = addressEntityList.stream()</span><br><span class="line">                .collect(Collectors.groupingBy(AddressEntity::getUserId));</span><br><span class="line">        userVOList.forEach(userVO -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (userVO.getStatus() == UserStatus.FREEZE) &#123;</span><br><span class="line">                log.error(<span class="string">&quot;ç”¨æˆ·&#123;&#125;çŠ¶æ€å¼‚å¸¸ï¼ï¼&quot;</span>, userVO.getUsername());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//1ã€è·å–å¯¹åº”åœ°å€åˆ—è¡¨</span></span><br><span class="line">            Optional.ofNullable(addressEntityMap.get(userVO.getId()))</span><br><span class="line">                    .ifPresent(addressEntities -&gt; &#123;</span><br><span class="line">                        <span class="comment">//2ã€è½¬æ¢ä¸ºVoåœ°å€åˆ—è¡¨</span></span><br><span class="line">                        List&lt;AddressVO&gt; addressVOList = BeanUtil.copyToList(addressEntities, AddressVO.class);</span><br><span class="line">                        <span class="comment">//3ã€æ³¨å…¥Vo</span></span><br><span class="line">                        userVO.setAddressList(addressVOList);</span><br><span class="line">                    &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> userVOList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢ page</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;åˆ†é¡µæŸ¥è¯¢ page&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> PageDTO&lt;UserVO&gt; <span class="title function_">queryUsersPage</span><span class="params">(<span class="meta">@ParameterObject</span> UserQuery query)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;queryUsersPage ===&gt; &#123;&#125;&quot;</span>, query);</span><br><span class="line">        Page&lt;UserEntity&gt; userEntityPage = userService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;UserEntity&gt;(query.getPageNo(), query.getPageSize())</span><br><span class="line">                        .addOrder(ObjectUtil.isEmpty(query.getSortBy()) ?</span><br><span class="line">                                OrderItem.desc(<span class="string">&quot;update_time&quot;</span>) :</span><br><span class="line">                                (query.getIsAsc() != <span class="literal">null</span> &amp;&amp; query.getIsAsc() ?</span><br><span class="line">                                        OrderItem.asc(query.getSortBy()) :</span><br><span class="line">                                        OrderItem.desc(query.getSortBy()))),</span><br><span class="line">                Wrappers.lambdaQuery(UserEntity.class)</span><br><span class="line">                        .like(StrUtil.isNotBlank(query.getName()), UserEntity::getUsername, query.getName())</span><br><span class="line">                        .between(query.getMinBalance() != <span class="literal">null</span> &amp;&amp; query.getMaxBalance() != <span class="literal">null</span>, UserEntity::getBalance, query.getMinBalance(), query.getMaxBalance()));</span><br><span class="line">        System.out.println(<span class="string">&quot;userEntityPage = &quot;</span> + userEntityPage.getRecords());</span><br><span class="line">        <span class="comment">//è½¬æ¢ä¸ºVo</span></span><br><span class="line">        List&lt;UserVO&gt; userVOList = BeanUtil.copyToList(userEntityPage.getRecords(), UserVO.class);</span><br><span class="line">        PageDTO&lt;UserVO&gt; userVoPageDTO = <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(userEntityPage.getCurrent(), userEntityPage.getSize(), userVOList);</span><br><span class="line">        userVoPageDTO.setTotal(userEntityPage.getTotal());</span><br><span class="line">        System.out.println(<span class="string">&quot;userVoPageDTO = &quot;</span> + userVoPageDTO.getPages());</span><br><span class="line">        <span class="keyword">return</span> userService.queryUsersPage(query);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>UserVoï¼š</strong>è¿”å›ç”¨æˆ·å¯¹è±¡ç»™å‰ç«¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·è¡¨VO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lixuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2024/8/7 17:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserVO</span> <span class="keyword">extends</span> <span class="title class_">UserEntity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Serial</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;åœ°å€åˆ—è¡¨&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;AddressVO&gt; addressList;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>IUserServiceï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 1045754</span></span><br><span class="line"><span class="comment">* <span class="doctag">@description</span> é’ˆå¯¹è¡¨ã€user(ç”¨æˆ·è¡¨)ã€‘çš„æ•°æ®åº“æ“ä½œService</span></span><br><span class="line"><span class="comment">* <span class="doctag">@createDate</span> 2024-08-07 17:27:57</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;UserEntity&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">deductBalance</span><span class="params">(Long id, Integer money)</span>;</span><br><span class="line"></span><br><span class="line">    PageDTO&lt;UserVO&gt; <span class="title function_">queryUsersPage</span><span class="params">(UserQuery query)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>UserServiceImplï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 1045754</span></span><br><span class="line"><span class="comment">* <span class="doctag">@description</span> é’ˆå¯¹è¡¨ã€user(ç”¨æˆ·è¡¨)ã€‘çš„æ•°æ®åº“æ“ä½œServiceå®ç°</span></span><br><span class="line"><span class="comment">* <span class="doctag">@createDate</span> 2024-08-07 17:27:57</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, UserEntity&gt;</span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">deductBalance</span><span class="params">(Long id, Integer money)</span> &#123;</span><br><span class="line">        <span class="comment">//1ã€æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        <span class="type">UserEntity</span> <span class="variable">user</span> <span class="operator">=</span> getById(id);</span><br><span class="line">        <span class="comment">//2ã€æ ¡éªŒç”¨æˆ·çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span> || user.getStatus().getValue()== <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·çŠ¶æ€å¼‚å¸¸ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3ã€æ ¡éªŒä½™é¢æ˜¯å¦å……è¶³</span></span><br><span class="line">        <span class="keyword">if</span> (user.getBalance() &lt; money) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ä½™é¢ä¸è¶³ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//4ã€æ‰£å‡ä½™é¢</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">remainBalance</span> <span class="operator">=</span> user.getBalance() - money;</span><br><span class="line">        <span class="keyword">return</span> lambdaUpdate()</span><br><span class="line">                .set(UserEntity::getBalance,remainBalance)</span><br><span class="line">                .set(remainBalance==<span class="number">0</span>,UserEntity::getStatus,<span class="number">2</span>)</span><br><span class="line">                .eq(UserEntity::getId,id)</span><br><span class="line">                <span class="comment">//ä¹è§‚é”</span></span><br><span class="line">                .eq(UserEntity::getBalance,user.getBalance())</span><br><span class="line">                .update();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PageDTO&lt;UserVO&gt; <span class="title function_">queryUsersPage</span><span class="params">(UserQuery query)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.æ„å»ºæ¡ä»¶</span></span><br><span class="line">        <span class="comment">// 1.1.åˆ†é¡µæ¡ä»¶</span></span><br><span class="line">        Page&lt;UserEntity&gt; page = Page.of(query.getPageNo(), query.getPageSize());</span><br><span class="line">        <span class="comment">// 1.2.æ’åºæ¡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (query.getSortBy() != <span class="literal">null</span>) &#123;</span><br><span class="line">            page.addOrder(query.getIsAsc()!= <span class="literal">null</span>&amp;&amp; query.getIsAsc() ? OrderItem.asc(query.getSortBy()) : OrderItem.desc(query.getSortBy()));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// é»˜è®¤æŒ‰ç…§æ›´æ–°æ—¶é—´æ’åº</span></span><br><span class="line">            page.addOrder(OrderItem.desc(<span class="string">&quot;update_time&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.æŸ¥è¯¢</span></span><br><span class="line">        page(page);</span><br><span class="line">        <span class="comment">// 3.æ•°æ®éç©ºæ ¡éªŒ</span></span><br><span class="line">        List&lt;UserEntity&gt; records = page.getRecords();</span><br><span class="line">        <span class="keyword">if</span> (records == <span class="literal">null</span> || records.size() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ— æ•°æ®ï¼Œè¿”å›ç©ºç»“æœ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(page.getTotal(), page.getPages(), Collections.emptyList());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.æœ‰æ•°æ®ï¼Œè½¬æ¢</span></span><br><span class="line">        List&lt;UserVO&gt; list = BeanUtil.copyToList(records, UserVO.class);</span><br><span class="line">        <span class="comment">// 5.å°è£…è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(page.getTotal(), page.getPages(), list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>UserMapperï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> 1045754</span></span><br><span class="line"><span class="comment">* <span class="doctag">@description</span> é’ˆå¯¹è¡¨ã€user(ç”¨æˆ·è¡¨)ã€‘çš„æ•°æ®åº“æ“ä½œMapper</span></span><br><span class="line"><span class="comment">* <span class="doctag">@createDate</span> 2024-08-07 17:27:57</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Entity</span> com.mybatisplus.domain.entity.UserEntity</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;UserEntity&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;UPDATE user SET balance = balance - #&#123;money&#125; $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deductBalanceByIds</span><span class="params">(<span class="meta">@Param(&quot;money&quot;)</span> <span class="type">int</span> money, <span class="meta">@Param(&quot;ew&quot;)</span> QueryWrapper&lt;UserEntity&gt; wrapper)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ä¸Šè¿°æ¥å£ï¼Œé€šè¿‡å¼•å…¥åœ¨ <strong>Controller</strong> å±‚å°±å¯ä»¥å®Œæˆä¸šåŠ¡æ¥å£ï¼Œä½†æ˜¯ä¸ºäº†èƒ½å¤Ÿæ›´åŠ è§„èŒƒï¼Œæ‰€ä»¥å¯¹äºå¤æ‚çš„ä¸šåŠ¡ï¼Œæˆ‘ä»¬ä»»ç„¶ä¼šé€‰æ‹©å°†ä¸šåŠ¡åŠŸèƒ½æ”¾åˆ° <strong>Service</strong> å±‚å»è¿›è¡Œä¸šåŠ¡å®ç°ã€‚</p><h3 id="â‘¢-Lambda"><a href="#â‘¢-Lambda" class="headerlink" title="â‘¢ Lambda"></a>â‘¢ Lambda</h3><p><strong>IService</strong> ä¸­è¿˜æä¾›äº† <strong>Lambda</strong> æ–¹æ³•æ¥ç®€åŒ–æˆ‘ä»¬å¤æ‚çš„æŸ¥è¯¢å’Œæ›´æ–°åŠŸèƒ½ã€‚</p><p>æ¡ˆä¾‹ä¸€ï¼šå®ç°ä¸€ä¸ªæ ¹æ®å¤æ‚æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·çš„æ¥å£ï¼ŒæŸ¥è¯¢æ¡ä»¶å¦‚ä¸‹ï¼š</p><ul><li><strong>name</strong> ï¼šç”¨æˆ·å…³é”®åç§°ï¼Œå¯ä»¥ä¸ºç©º</li><li><strong>status</strong> ï¼šç”¨æˆ·çŠ¶æ€ï¼Œå¯ä»¥ä¸ºç©º</li><li><strong>minBalance</strong> ï¼šæœ€å°ä½™é¢ï¼Œå¯ä»¥ä¸ºç©º</li><li><strong>maxBalance</strong> ï¼šæœ€å¤§ä½™é¢ï¼Œå¯ä»¥ä¸ºç©º</li></ul><p>é¦–å…ˆå®šä¹‰æŸ¥è¯¢å®ä½“ï¼Œ<strong>UserQuery</strong> ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(description = &quot;ç”¨æˆ·æŸ¥è¯¢æ¡ä»¶å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserQuery</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·åå…³é”®å­—&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ2-å†»ç»“&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ä½™é¢æœ€å°å€¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer minBalance;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ä½™é¢æœ€å¤§å€¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer maxBalance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œåœ¨ <strong>UserController</strong> ä¸­å®šä¹‰æŸ¥è¯¢æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ ¹æ®idé›†åˆæŸ¥è¯¢ç”¨æˆ·&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;UserVO&gt; <span class="title function_">queryUsers</span><span class="params">(UserQuery query)</span>&#123;</span><br><span class="line">    <span class="comment">// 1.ç»„ç»‡æ¡ä»¶</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> query.getName();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">status</span> <span class="operator">=</span> query.getStatus();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">minBalance</span> <span class="operator">=</span> query.getMinBalance();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">maxBalance</span> <span class="operator">=</span> query.getMaxBalance();</span><br><span class="line">    LambdaQueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().lambda()</span><br><span class="line">            .like(username != <span class="literal">null</span>, User::getUsername, username)</span><br><span class="line">            .eq(status != <span class="literal">null</span>, User::getStatus, status)</span><br><span class="line">            .ge(minBalance != <span class="literal">null</span>, User::getBalance, minBalance)</span><br><span class="line">            .le(maxBalance != <span class="literal">null</span>, User::getBalance, maxBalance);</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    List&lt;User&gt; users = userService.list(wrapper);</span><br><span class="line">    <span class="comment">// 3.å¤„ç†vo</span></span><br><span class="line">    <span class="keyword">return</span> BeanUtil.copyToList(users, UserVO.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç»„ç»‡æŸ¥è¯¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬åŠ å…¥ <code>username != null</code> è¿™æ ·çš„å‚æ•°ï¼Œè¡¨ç¤ºåªæœ‰å½“è¿™ä¸ªæ¡ä»¶æˆç«‹çš„æ—¶å€™æ‰ä¼šæ·»åŠ åˆ°è¿™ä¸ªæŸ¥è¯¢æ¡ä»¶é‡Œï¼Œç±»ä¼¼ä¸ <strong>Mapper.xml</strong> æ–‡ä»¶ä¸­çš„ <code>&lt;if&gt;</code>æ ‡ç­¾ã€‚è¿™æ ·å°±å®ç°äº†åŠ¨æ€æŸ¥è¯¢æ•ˆæœã€‚</p><p><strong>Service</strong> ä¸­å¯¹<code>LambdaQueryWrapper</code>å’Œ<code>LambdaUpdateWrapper</code>çš„ç”¨æ³•è¿›ä¸€æ­¥åšäº†ç®€åŒ–ï¼Œä¸éœ€è¦ä½¿ç”¨ <strong>new</strong> æ¥åˆ›å»º <strong>Wrapper</strong> ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ <strong>lambdaQuery</strong> å’Œ <strong>lambdaUpdate</strong> æ–¹æ³•ï¼š</p><p><strong>lambdaQuery</strong> ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ ¹æ®idé›†åˆæŸ¥è¯¢ç”¨æˆ·&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;UserVO&gt; <span class="title function_">queryUsers</span><span class="params">(UserQuery query)</span>&#123;</span><br><span class="line">    <span class="comment">// 1.ç»„ç»‡æ¡ä»¶l</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> query.getName();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">status</span> <span class="operator">=</span> query.getStatus();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">minBalance</span> <span class="operator">=</span> query.getMinBalance();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">maxBalance</span> <span class="operator">=</span> query.getMaxBalance();</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    List&lt;User&gt; users = userService.lambdaQuery()</span><br><span class="line">            .like(username != <span class="literal">null</span>, User::getUsername, username)</span><br><span class="line">            .eq(status != <span class="literal">null</span>, User::getStatus, status)</span><br><span class="line">            .ge(minBalance != <span class="literal">null</span>, User::getBalance, minBalance)</span><br><span class="line">            .le(maxBalance != <span class="literal">null</span>, User::getBalance, maxBalance)</span><br><span class="line">            .list();</span><br><span class="line">    <span class="comment">// 3.å¤„ç†vo</span></span><br><span class="line">    <span class="keyword">return</span> BeanUtil.copyToList(users, UserVO.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç° <code>lambdaQuery</code> æ–¹æ³•ä¸­é™¤äº†å¯ä»¥æ„å»ºæ¡ä»¶ï¼Œè¿˜éœ€è¦åœ¨é“¾å¼ç¼–ç¨‹çš„æœ€åæ·»åŠ ä¸€ä¸ª<code>list()</code>ï¼Œè¿™æ˜¯åœ¨å‘Šè¯‰ <code>MP</code> æˆ‘ä»¬çš„è°ƒç”¨ç»“æœéœ€è¦æ˜¯ä¸€ä¸ª <code>list</code> é›†åˆã€‚è¿™é‡Œä¸ä»…å¯ä»¥ç”¨<code>list()</code>ï¼Œå¯é€‰çš„æ–¹æ³•æœ‰ï¼š</p><ul><li><code>.one()</code>ï¼šæœ€å¤š1ä¸ªç»“æœ</li><li><code>.list()</code>ï¼šè¿”å›é›†åˆç»“æœ</li><li><code>.count()</code>ï¼šè¿”å›è®¡æ•°ç»“æœ</li></ul><p><strong>lambdaUpdate</strong> ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deductBalance</span><span class="params">(Long id, Integer money)</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> getById(id);</span><br><span class="line">    <span class="comment">// 2.æ ¡éªŒç”¨æˆ·çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">if</span> (user == <span class="literal">null</span> || user.getStatus() == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·çŠ¶æ€å¼‚å¸¸ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 3.æ ¡éªŒä½™é¢æ˜¯å¦å……è¶³</span></span><br><span class="line">    <span class="keyword">if</span> (user.getBalance() &lt; money) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·ä½™é¢ä¸è¶³ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4.æ‰£å‡ä½™é¢ update tb_user set balance = balance - ?</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">remainBalance</span> <span class="operator">=</span> user.getBalance() - money;</span><br><span class="line">    lambdaUpdate()</span><br><span class="line">            .set(User::getBalance, remainBalance) <span class="comment">// æ›´æ–°ä½™é¢</span></span><br><span class="line">            .set(remainBalance == <span class="number">0</span>, User::getStatus, <span class="number">2</span>) <span class="comment">// åŠ¨æ€åˆ¤æ–­ï¼Œæ˜¯å¦æ›´æ–°status</span></span><br><span class="line">            .eq(User::getId, id)</span><br><span class="line">            .eq(User::getBalance, user.getBalance()) <span class="comment">// ä¹è§‚é”</span></span><br><span class="line">            .update();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="â‘£-æ‰¹é‡æ–°å¢"><a href="#â‘£-æ‰¹é‡æ–°å¢" class="headerlink" title="â‘£ æ‰¹é‡æ–°å¢"></a>â‘£ æ‰¹é‡æ–°å¢</h3><p>é€æ¡æ’å…¥ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSaveOneByOne</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">b</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">100000</span>; i++) &#123;</span><br><span class="line">        userService.save(buildUser(i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="variable">e</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;è€—æ—¶ï¼š&quot;</span> + (e - b));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> User <span class="title function_">buildUser</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setUsername(<span class="string">&quot;user_&quot;</span> + i);</span><br><span class="line">    user.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">    user.setPhone(<span class="string">&quot;&quot;</span> + (<span class="number">18688190000L</span> + i));</span><br><span class="line">    user.setBalance(<span class="number">2000</span>);</span><br><span class="line">    user.setInfo(<span class="string">&quot;&#123;\&quot;age\&quot;: 24, \&quot;intro\&quot;: \&quot;è‹±æ–‡è€å¸ˆ\&quot;, \&quot;gender\&quot;: \&quot;female\&quot;&#125;&quot;</span>);</span><br><span class="line">    user.setCreateTime(LocalDateTime.now());</span><br><span class="line">    user.setUpdateTime(user.getCreateTime());</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è€—æ—¶é•¿</li><li>é€Ÿåº¦æ…¢</li></ul><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v11.png" alt="AbstractWrapper"></p><p>æ‰¹é‡æ’å…¥ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSaveBatch</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// å‡†å¤‡10ä¸‡æ¡æ•°æ®</span></span><br><span class="line">    List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="number">1000</span>);</span><br><span class="line">    <span class="type">long</span> <span class="variable">b</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">100000</span>; i++) &#123;</span><br><span class="line">        list.add(buildUser(i));</span><br><span class="line">        <span class="comment">// æ¯1000æ¡æ‰¹é‡æ’å…¥ä¸€æ¬¡</span></span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">1000</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            userService.saveBatch(list);</span><br><span class="line">            list.clear();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">long</span> <span class="variable">e</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;è€—æ—¶ï¼š&quot;</span> + (e - b));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è€—æ—¶è¾ƒçŸ­</li><li>é€Ÿåº¦è¾ƒå¿«</li></ul><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v12.png" alt="AbstractWrapper"></p><p>å¯ä»¥çœ‹åˆ°æ‰¹å¤„ç†åï¼Œæ¯”é€æ¡æ–°å¢çš„æ•ˆç‡æé«˜äº†10å€å·¦å³ï¼Œæ€§èƒ½è¿˜æ˜¯ä¸é”™çš„ã€‚</p><p>ä¸è¿‡æˆ‘ä»¬æŸ¥çœ‹ <strong>MybatisPlus</strong> æºç ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sqlStatement</span> <span class="operator">=</span> getSqlStatement(SqlMethod.INSERT_ONE);</span><br><span class="line">    <span class="keyword">return</span> executeBatch(entityList, batchSize, (sqlSession, entity) -&gt; sqlSession.insert(sqlStatement, entity));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...SqlHelper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;E&gt; <span class="type">boolean</span> <span class="title function_">executeBatch</span><span class="params">(Class&lt;?&gt; entityClass, Log log, Collection&lt;E&gt; list, <span class="type">int</span> batchSize, BiConsumer&lt;SqlSession, E&gt; consumer)</span> &#123;</span><br><span class="line">    Assert.isFalse(batchSize &lt; <span class="number">1</span>, <span class="string">&quot;batchSize must not be less than one&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> !CollectionUtils.isEmpty(list) &amp;&amp; executeBatch(entityClass, log, sqlSession -&gt; &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> list.size();</span><br><span class="line">        <span class="type">int</span> <span class="variable">idxLimit</span> <span class="operator">=</span> Math.min(batchSize, size);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (E element : list) &#123;</span><br><span class="line">            consumer.accept(sqlSession, element);</span><br><span class="line">            <span class="keyword">if</span> (i == idxLimit) &#123;</span><br><span class="line">                sqlSession.flushStatements();</span><br><span class="line">                idxLimit = Math.min(idxLimit + batchSize, size);</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°å…¶å® <strong>MybatisPlus</strong> çš„æ‰¹å¤„ç†æ˜¯åŸºäº <strong>PrepareStatement</strong> çš„é¢„ç¼–è¯‘æ¨¡å¼ï¼Œç„¶åæ‰¹é‡æäº¤ï¼Œæœ€ç»ˆåœ¨æ•°æ®åº“æ‰§è¡Œæ—¶è¿˜æ˜¯ä¼šæœ‰å¤šæ¡ <strong>insert</strong> è¯­å¥ï¼Œé€æ¡æ’å…¥æ•°æ®ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Preparing: <span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> ( username, password, phone, info, balance, create_time, update_time ) <span class="keyword">VALUES</span> ( ?, ?, ?, ?, ?, ?, ? )</span><br><span class="line">Parameters: user_1, <span class="number">123</span>, <span class="number">18688190001</span>, &quot;&quot;, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span></span><br><span class="line">Parameters: user_2, <span class="number">123</span>, <span class="number">18688190002</span>, &quot;&quot;, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span></span><br><span class="line">Parameters: user_3, <span class="number">123</span>, <span class="number">18688190003</span>, &quot;&quot;, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span></span><br></pre></td></tr></table></figure><p>è€Œå¦‚æœæƒ³è¦å¾—åˆ°æœ€ä½³æ€§èƒ½ï¼Œæœ€å¥½å°†å¤šæ¡ SQL åˆå¹¶ä¸ºä¸€æ¡ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> ( username, password, phone, info, balance, create_time, update_time )</span><br><span class="line"><span class="keyword">VALUES</span> </span><br><span class="line">(user_1, <span class="number">123</span>, <span class="number">18688190001</span>, &quot;&quot;, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>),</span><br><span class="line">(user_2, <span class="number">123</span>, <span class="number">18688190002</span>, &quot;&quot;, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>),</span><br><span class="line">(user_3, <span class="number">123</span>, <span class="number">18688190003</span>, &quot;&quot;, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>),</span><br><span class="line">(user_4, <span class="number">123</span>, <span class="number">18688190004</span>, &quot;&quot;, <span class="number">2000</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>, <span class="number">2023</span><span class="number">-07</span><span class="number">-01</span>);</span><br></pre></td></tr></table></figure><p>è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p><strong>MySQL</strong> çš„å®¢æˆ·ç«¯è¿æ¥å‚æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ª <strong>rewriteBatchedStatements</strong> ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯é‡å†™æ‰¹å¤„ç† <strong>statement</strong> è¯­å¥ã€‚</p><p>ä¿®æ”¹ <code>application.yml</code> åœ¨ <code>jdbc</code> çš„ <code>url</code> åé¢æ·»åŠ å‚æ•°<code>&amp;rewriteBatchedStatements=true</code> ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/mp?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;transformedBitIsBoolean=true&amp;tinyInt1isBit=false&amp;allowMultiQueries=true&amp;serverTimezone=GMT%2B8&amp;allowPublicKeyRetrieval=true&amp;rewriteBatchedStatements=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></table></figure><p>å†æ¬¡æµ‹è¯•æ’å…¥10ä¸‡æ¡æ•°æ®ï¼Œå¯ä»¥å‘ç°é€Ÿåº¦æœ‰æ˜æ˜¾çš„æå‡ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v13.png" alt="AbstractWrapper"></p><p>åœ¨<code>ClientPreparedStatement</code>çš„<code>executeBatchInternal</code>ä¸­ï¼Œæœ‰åˆ¤æ–­<code>rewriteBatchedStatements</code>å€¼æ˜¯å¦ä¸ºtrueå¹¶é‡å†™SQLçš„åŠŸèƒ½ï¼š</p><p>æœ€ç»ˆï¼Œ<code>SQL</code> è¢«é‡å†™äº†ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v14.png" alt="AbstractWrapper"></p><h1 id="æ‰©å±•åŠŸèƒ½"><a href="#æ‰©å±•åŠŸèƒ½" class="headerlink" title="æ‰©å±•åŠŸèƒ½"></a>æ‰©å±•åŠŸèƒ½</h1><h2 id="â… ä»£ç ç”Ÿæˆ"><a href="#â… ä»£ç ç”Ÿæˆ" class="headerlink" title="â… ä»£ç ç”Ÿæˆ"></a>â… ä»£ç ç”Ÿæˆ</h2><p>åœ¨ä½¿ç”¨ <strong>MybatisPlus</strong> ä»¥åï¼ŒåŸºç¡€çš„ <strong>Mapper</strong> ã€<strong>Servce</strong> ã€<strong>PO</strong> ä»£ç ç›¸å¯¹å›ºå®šï¼Œé‡å¤ç¼–å†™ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚</p><p>æ¨èåˆ©ç”¨ <strong>MyBatisX</strong> æ’ä»¶è¿›è¡Œä»£ç ç”Ÿæˆï¼š</p><h3 id="â‘ -æ’ä»¶å®‰è£…"><a href="#â‘ -æ’ä»¶å®‰è£…" class="headerlink" title="â‘  æ’ä»¶å®‰è£…"></a>â‘  æ’ä»¶å®‰è£…</h3><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v15.png" alt="AbstractWrapper"></p><h3 id="â‘¡-ä½¿ç”¨"><a href="#â‘¡-ä½¿ç”¨" class="headerlink" title="â‘¡ ä½¿ç”¨"></a>â‘¡ ä½¿ç”¨</h3><h4 id="IDEA-é›†æˆæ•°æ®åº“ï¼š"><a href="#IDEA-é›†æˆæ•°æ®åº“ï¼š" class="headerlink" title="IDEA é›†æˆæ•°æ®åº“ï¼š"></a><strong>IDEA</strong> é›†æˆæ•°æ®åº“ï¼š</h4><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v19.png" alt="AbstractWrapper"></p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v20.png" alt="AbstractWrapper"></p><h4 id="é€‰æ‹©ç”Ÿæˆæ•°æ®ï¼š"><a href="#é€‰æ‹©ç”Ÿæˆæ•°æ®ï¼š" class="headerlink" title="é€‰æ‹©ç”Ÿæˆæ•°æ®ï¼š"></a>é€‰æ‹©ç”Ÿæˆæ•°æ®ï¼š</h4><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v16.png" alt="AbstractWrapper"></p><ol><li>ç‚¹å‡»å³ä¾§ <strong>Database</strong> å±•å¼€è¿æ¥æ•°æ®åº“</li><li>é€‰æ‹©æ‰€éœ€ç”Ÿæˆä¸šåŠ¡è¡¨ï¼Œå³é”®</li><li>ç‚¹å‡» <strong>MybatisX-Generator</strong> æ‰“å¼€ä»£ç ç”Ÿæˆçª—å£</li></ol><h4 id="é…ç½®ä»£ç ç”Ÿæˆï¼š"><a href="#é…ç½®ä»£ç ç”Ÿæˆï¼š" class="headerlink" title="é…ç½®ä»£ç ç”Ÿæˆï¼š"></a>é…ç½®ä»£ç ç”Ÿæˆï¼š</h4><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v17.png" alt="AbstractWrapper"></p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v18.png" alt="AbstractWrapper"></p><h4 id="ç”Ÿæˆç»“æœï¼š"><a href="#ç”Ÿæˆç»“æœï¼š" class="headerlink" title="ç”Ÿæˆç»“æœï¼š"></a>ç”Ÿæˆç»“æœï¼š</h4><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v21.png" alt="AbstractWrapper"></p><h2 id="â…¡-é™æ€å·¥å…·"><a href="#â…¡-é™æ€å·¥å…·" class="headerlink" title="â…¡ é™æ€å·¥å…·"></a>â…¡ é™æ€å·¥å…·</h2><p>æœ‰çš„æ—¶å€™ Service ä¹‹é—´ä¹Ÿä¼šç›¸äº’è°ƒç”¨ï¼Œä¸ºäº†é¿å…å‡ºç°å¾ªç¯ä¾èµ–é—®é¢˜ï¼ŒMybatisPlus æä¾›äº†ä¸€ä¸ªé™æ€å·¥å…·ç±»ï¼šDb ï¼Œå…¶ä¸­çš„ä¸€äº›é™æ€æ–¹æ³•ä¸ IService ä¸­æ–¹æ³•ç­¾ååŸºæœ¬ä¸€è‡´ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç° CRUD åŠŸèƒ½ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»¥é™æ€æ–¹å¼è°ƒç”¨Serviceä¸­çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> VampireAchao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2022-05-03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Db</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory.getLog(Db.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Db</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">/* Do not new me! */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥ä¸€æ¡è®°å½•ï¼ˆé€‰æ‹©å­—æ®µï¼Œç­–ç•¥æ’å…¥ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">save</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(entity)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">result</span> <span class="operator">=</span> SqlHelper.execute(getEntityClass(entity), baseMapper -&gt; baseMapper.insert(entity));</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.retBool(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥ï¼ˆæ‰¹é‡ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityList å®ä½“å¯¹è±¡é›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> saveBatch(entityList, IService.DEFAULT_BATCH_SIZE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥ï¼ˆæ‰¹é‡ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityList å®ä½“å¯¹è±¡é›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> batchSize  æ’å…¥æ‰¹æ¬¡æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">saveBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isEmpty(entityList)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Class&lt;T&gt; entityClass = getEntityClass(entityList);</span><br><span class="line">        Class&lt;?&gt; mapperClass = ClassUtils.toClassConfident(getTableInfo(entityClass).getCurrentNamespace());</span><br><span class="line">        <span class="type">String</span> <span class="variable">sqlStatement</span> <span class="operator">=</span> SqlHelper.getSqlStatement(mapperClass, SqlMethod.INSERT_ONE);</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.executeBatch(entityClass, log, entityList, batchSize, (sqlSession, entity) -&gt; sqlSession.insert(sqlStatement, entity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡ä¿®æ”¹æ’å…¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityList å®ä½“å¯¹è±¡é›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> saveOrUpdateBatch(entityList, IService.DEFAULT_BATCH_SIZE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡ä¿®æ”¹æ’å…¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityList å®ä½“å¯¹è±¡é›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> batchSize  æ¯æ¬¡çš„æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">saveOrUpdateBatch</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isEmpty(entityList)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Class&lt;T&gt; entityClass = getEntityClass(entityList);</span><br><span class="line">        <span class="type">TableInfo</span> <span class="variable">tableInfo</span> <span class="operator">=</span> getTableInfo(entityClass);</span><br><span class="line">        Class&lt;?&gt; mapperClass = ClassUtils.toClassConfident(tableInfo.getCurrentNamespace());</span><br><span class="line">        <span class="type">String</span> <span class="variable">keyProperty</span> <span class="operator">=</span> tableInfo.getKeyProperty();</span><br><span class="line">        Assert.notEmpty(keyProperty, <span class="string">&quot;error: can not execute. because can not find column for primary key from entity!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.saveOrUpdateBatch(entityClass, mapperClass, log, entityList, batchSize, (sqlSession, entity) -&gt; &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">idVal</span> <span class="operator">=</span> tableInfo.getPropertyValue(entity, keyProperty);</span><br><span class="line">            <span class="keyword">return</span> StringUtils.checkValNull(idVal)</span><br><span class="line">                || CollectionUtils.isEmpty(sqlSession.selectList(SqlHelper.getSqlStatement(mapperClass, SqlMethod.SELECT_BY_ID), entity));</span><br><span class="line">        &#125;, (sqlSession, entity) -&gt; &#123;</span><br><span class="line">            MapperMethod.ParamMap&lt;T&gt; param = <span class="keyword">new</span> <span class="title class_">MapperMethod</span>.ParamMap&lt;&gt;();</span><br><span class="line">            param.put(Constants.ENTITY, entity);</span><br><span class="line">            sqlSession.update(SqlHelper.getSqlStatement(mapperClass, SqlMethod.UPDATE_BY_ID), param);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® ID åˆ é™¤</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id          ä¸»é”®ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(Serializable id, Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; SqlHelper.retBool(baseMapper.deleteById(id)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å®ä½“(ID)åˆ é™¤</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">removeById</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(entity)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(entity), baseMapper -&gt; SqlHelper.retBool(baseMapper.deleteById(entity)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entity æ¡ä»¶ï¼Œåˆ é™¤è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“åŒ…è£…ç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; SqlHelper.retBool(baseMapper.delete(queryWrapper)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® ID é€‰æ‹©ä¿®æ”¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">updateById</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(entity)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(entity), baseMapper -&gt; SqlHelper.retBool(baseMapper.updateById(entity)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® UpdateWrapper æ¡ä»¶ï¼Œæ›´æ–°è®°å½• éœ€è¦è®¾ç½®sqlset</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> updateWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.update.UpdateWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; updateWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® whereEntity æ¡ä»¶ï¼Œæ›´æ–°è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity        å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> updateWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.update.UpdateWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(T entity, AbstractWrapper&lt;T, ?, ?&gt; updateWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(updateWrapper), baseMapper -&gt; SqlHelper.retBool(baseMapper.update(entity, updateWrapper)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ID æ‰¹é‡æ›´æ–°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityList å®ä½“å¯¹è±¡é›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> updateBatchById(entityList, IService.DEFAULT_BATCH_SIZE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ID æ‰¹é‡æ›´æ–°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityList å®ä½“å¯¹è±¡é›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> batchSize  æ›´æ–°æ‰¹æ¬¡æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">updateBatchById</span><span class="params">(Collection&lt;T&gt; entityList, <span class="type">int</span> batchSize)</span> &#123;</span><br><span class="line">        Class&lt;T&gt; entityClass = getEntityClass(entityList);</span><br><span class="line">        <span class="type">TableInfo</span> <span class="variable">tableInfo</span> <span class="operator">=</span> getTableInfo(entityClass);</span><br><span class="line">        <span class="type">String</span> <span class="variable">sqlStatement</span> <span class="operator">=</span> SqlHelper.getSqlStatement(ClassUtils.toClassConfident(tableInfo.getCurrentNamespace()), SqlMethod.UPDATE_BY_ID);</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.executeBatch(entityClass, log, entityList, batchSize, (sqlSession, entity) -&gt; &#123;</span><br><span class="line">            MapperMethod.ParamMap&lt;T&gt; param = <span class="keyword">new</span> <span class="title class_">MapperMethod</span>.ParamMap&lt;&gt;();</span><br><span class="line">            param.put(Constants.ENTITY, entity);</span><br><span class="line">            sqlSession.update(sqlStatement, param);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ï¼ˆæ ¹æ®ID æ‰¹é‡åˆ é™¤ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> list        ä¸»é”®IDæˆ–å®ä½“åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">removeByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; list, Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; SqlHelper.retBool(baseMapper.deleteBatchIds(list)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> columnMap   è¡¨å­—æ®µ map å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">removeByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap, Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; SqlHelper.retBool(baseMapper.deleteByMap(columnMap)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * TableId æ³¨è§£å­˜åœ¨æ›´æ–°è®°å½•ï¼Œå¦æ’å…¥ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">saveOrUpdate</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.isNull(entity)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Class&lt;T&gt; entityClass = getEntityClass(entity);</span><br><span class="line">        <span class="type">TableInfo</span> <span class="variable">tableInfo</span> <span class="operator">=</span> TableInfoHelper.getTableInfo(entityClass);</span><br><span class="line">        Assert.notNull(tableInfo, <span class="string">&quot;error: can not execute. because can not find cache of TableInfo for entity!&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">keyProperty</span> <span class="operator">=</span> tableInfo.getKeyProperty();</span><br><span class="line">        Assert.notEmpty(keyProperty, <span class="string">&quot;error: can not execute. because can not find column for id from entity!&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">idVal</span> <span class="operator">=</span> tableInfo.getPropertyValue(entity, tableInfo.getKeyProperty());</span><br><span class="line">        <span class="keyword">return</span> StringUtils.checkValNull(idVal) || Objects.isNull(getById((Serializable) idVal, entityClass)) ? save(entity) : updateById(entity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® ID æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id          ä¸»é”®ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getById</span><span class="params">(Serializable id, Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectById(id));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½• &lt;br/&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;ç»“æœé›†ï¼Œå¦‚æœæ˜¯å¤šä¸ªä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéšæœºå–ä¸€æ¡åŠ ä¸Šé™åˆ¶æ¡ä»¶ wrapper.last(&quot;LIMIT 1&quot;)&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getOne</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getOne(queryWrapper, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entityé‡Œä¸ä¸ºç©ºçš„å­—æ®µï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½• &lt;br/&gt;</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;ç»“æœé›†ï¼Œå¦‚æœæ˜¯å¤šä¸ªä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéšæœºå–ä¸€æ¡åŠ ä¸Šé™åˆ¶æ¡ä»¶ wrapper.last(&quot;LIMIT 1&quot;)&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getOne</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getOne(Wrappers.lambdaQuery(entity), <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entityé‡Œä¸ä¸ºç©ºçš„å­—æ®µï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity  å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> throwEx æœ‰å¤šä¸ª result æ˜¯å¦æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getOne</span><span class="params">(T entity, <span class="type">boolean</span> throwEx)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getOne(Wrappers.lambdaQuery(entity), throwEx);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> throwEx      æœ‰å¤šä¸ª result æ˜¯å¦æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getOne</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper, <span class="type">boolean</span> throwEx)</span> &#123;</span><br><span class="line">        Class&lt;T&gt; entityClass = getEntityClass(queryWrapper);</span><br><span class="line">        <span class="keyword">if</span> (throwEx) &#123;</span><br><span class="line">            <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectOne(queryWrapper));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; SqlHelper.getObject(log, baseMapper.selectList(queryWrapper)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢ï¼ˆæ ¹æ® columnMap æ¡ä»¶ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> columnMap   è¡¨å­—æ®µ map å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">listByMap</span><span class="params">(Map&lt;String, Object&gt; columnMap, Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectByMap(columnMap));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> idList      ä¸»é”®IDåˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">listByIds</span><span class="params">(Collection&lt;? extends Serializable&gt; idList, Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectBatchIds(idList));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Map&lt;String, Object&gt; <span class="title function_">getMap</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; SqlHelper.getObject(log, baseMapper.selectMaps(queryWrapper)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® entityä¸ä¸ºç©ºæ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Map&lt;String, Object&gt; <span class="title function_">getMap</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getMap(Wrappers.lambdaQuery(entity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> Wrappers#emptyWrapper()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">long</span> <span class="title function_">count</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectCount(<span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®entityä¸­ä¸ä¸ºç©ºçš„æ•°æ®æŸ¥è¯¢è®°å½•æ•°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">long</span> <span class="title function_">count</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count(Wrappers.lambdaQuery(entity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">long</span> <span class="title function_">count</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; baseMapper.selectCount(queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">list</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; baseMapper.selectList(queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page         åˆ†é¡µæ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;          entity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">list</span><span class="params">(IPage&lt;T&gt; page, AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; baseMapper.selectList(page, queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> Wrappers#emptyWrapper()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">list</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectList(<span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page        åˆ†é¡µæ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;         entity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.3.2</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">list</span><span class="params">(IPage&lt;T&gt; page, Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectList(page, <span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®entityä¸­ä¸ä¸ºç©ºçš„å­—æ®µè¿›è¡ŒæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> Wrappers#emptyWrapper()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">list</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> list(Wrappers.lambdaQuery(entity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®entityä¸­ä¸ä¸ºç©ºçš„å­—æ®µè¿›è¡ŒæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page   åˆ†é¡µæ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;    entity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.3.2</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">list</span><span class="params">(IPage&lt;T&gt; page, T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> list(page, Wrappers.lambdaQuery(entity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; baseMapper.selectMaps(queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.3.2</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page åˆ†é¡µå‚æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; entity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">(IPage&lt;? extends Map&lt;String, Object&gt;&gt; page, AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; baseMapper.selectMaps(page, queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> Wrappers#emptyWrapper()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectMaps(<span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page        åˆ†é¡µæ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;         entity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.3.2</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">(IPage&lt;? extends Map&lt;String, Object&gt;&gt; page, Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectMaps(page, <span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®entityä¸ä¸ºç©ºçš„æ¡ä»¶æŸ¥è¯¢åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> listMaps(Wrappers.lambdaQuery(entity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®entityä¸ä¸ºç©ºçš„æ¡ä»¶æŸ¥è¯¢åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page   åˆ†é¡µæ¡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity entity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;    entity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 3.5.3.2</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">listMaps</span><span class="params">(IPage&lt;? extends Map&lt;String, Object&gt;&gt; page, T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> listMaps(page, Wrappers.lambdaQuery(entity));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">listObjs</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> listObjs(entityClass, i -&gt; i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;E, T&gt; List&lt;E&gt; <span class="title function_">listObjs</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; baseMapper.selectObjs(queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mapper       è½¬æ¢å‡½æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T, V&gt; List&lt;V&gt; <span class="title function_">listObjs</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper, SFunction&lt;? <span class="built_in">super</span> T, V&gt; mapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; baseMapper.selectList(queryWrapper).stream().map(mapper).collect(Collectors.toList()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢å…¨éƒ¨è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mapper      è½¬æ¢å‡½æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T, V&gt; List&lt;V&gt; <span class="title function_">listObjs</span><span class="params">(Class&lt;T&gt; entityClass, SFunction&lt;? <span class="built_in">super</span> T, V&gt; mapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectList(<span class="literal">null</span>).stream().map(mapper).collect(Collectors.toList()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ— æ¡ä»¶ç¿»é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page        ç¿»é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> Wrappers#emptyWrapper()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T, E <span class="keyword">extends</span> <span class="title class_">IPage</span>&lt;Map&lt;String, Object&gt;&gt;&gt; E <span class="title function_">pageMaps</span><span class="params">(E page, Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectMapsPage(page, <span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¿»é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page         ç¿»é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T, E <span class="keyword">extends</span> <span class="title class_">IPage</span>&lt;Map&lt;String, Object&gt;&gt;&gt; E <span class="title function_">pageMaps</span><span class="params">(E page, AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; baseMapper.selectMapsPage(page, queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ— æ¡ä»¶ç¿»é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page        ç¿»é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> Wrappers#emptyWrapper()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; IPage&lt;T&gt; <span class="title function_">page</span><span class="params">(IPage&lt;T&gt; page, Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(entityClass, baseMapper -&gt; baseMapper.selectPage(page, <span class="literal">null</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç¿»é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page         ç¿»é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; IPage&lt;T&gt; <span class="title function_">page</span><span class="params">(IPage&lt;T&gt; page, AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; baseMapper.selectPage(page, queryWrapper));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é“¾å¼æŸ¥è¯¢ æ™®é€š</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> QueryWrapper çš„åŒ…è£…ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; QueryChainWrapper&lt;T&gt; <span class="title function_">query</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.queryChain(entityClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * kté“¾å¼æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> KtQueryWrapper çš„åŒ…è£…ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; KtQueryChainWrapper&lt;T&gt; <span class="title function_">ktQuery</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.ktQueryChain(entityClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é“¾å¼æŸ¥è¯¢ lambda å¼</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;æ³¨æ„ï¼šä¸æ”¯æŒ Kotlin &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> LambdaQueryWrapper çš„åŒ…è£…ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; LambdaQueryChainWrapper&lt;T&gt; <span class="title function_">lambdaQuery</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.lambdaQueryChain(entityClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é“¾å¼æ›´æ”¹ æ™®é€š</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> UpdateWrapper çš„åŒ…è£…ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; UpdateChainWrapper&lt;T&gt; <span class="title function_">update</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.updateChain(entityClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * kté“¾å¼æ›´æ”¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> KtUpdateWrapper çš„åŒ…è£…ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; KtUpdateChainWrapper&lt;T&gt; <span class="title function_">ktUpdate</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.ktUpdateChain(entityClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é“¾å¼æ›´æ”¹ lambda å¼</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;æ³¨æ„ï¼šä¸æ”¯æŒ Kotlin &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> LambdaUpdateWrapper çš„åŒ…è£…ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; LambdaUpdateChainWrapper&lt;T&gt; <span class="title function_">lambdaUpdate</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChainWrappers.lambdaUpdateChain(entityClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * æ ¹æ®updateWrapperå°è¯•æ›´æ–°ï¼Œå¦ç»§ç»­æ‰§è¡ŒsaveOrUpdate(T)æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * æ­¤æ¬¡ä¿®æ”¹ä¸»è¦æ˜¯å‡å°‘äº†æ­¤é¡¹ä¸šåŠ¡ä»£ç çš„ä»£ç é‡ï¼ˆå­˜åœ¨æ€§éªŒè¯ä¹‹åçš„saveOrUpdateæ“ä½œï¼‰</span></span><br><span class="line"><span class="comment">     * &lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">saveOrUpdate</span><span class="params">(T entity, AbstractWrapper&lt;T, ?, ?&gt; updateWrapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> update(entity, updateWrapper) || saveOrUpdate(entity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±» &#123;<span class="doctag">@link</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mapper       è½¬æ¢å‡½æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T, V&gt; V <span class="title function_">getObj</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper, SFunction&lt;? <span class="built_in">super</span> T, V&gt; mapper)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SqlHelper.execute(getEntityClass(queryWrapper), baseMapper -&gt; mapper.apply(baseMapper.selectOne(queryWrapper)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»é›†åˆä¸­è·å–å®ä½“ç±»å‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityList å®ä½“é›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;        å®ä½“ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å®ä½“ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> &lt;T&gt; Class&lt;T&gt; <span class="title function_">getEntityClass</span><span class="params">(Collection&lt;T&gt; entityList)</span> &#123;</span><br><span class="line">        Class&lt;T&gt; entityClass = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (T entity : entityList) &#123;</span><br><span class="line">            <span class="keyword">if</span> (entity != <span class="literal">null</span> &amp;&amp; entity.getClass() != <span class="literal">null</span>) &#123;</span><br><span class="line">                entityClass = getEntityClass(entity);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Assert.notNull(entityClass, <span class="string">&quot;error: can not get entityClass from entityList&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> entityClass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»wrapperä¸­å°è¯•è·å–å®ä½“ç±»å‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> queryWrapper æ¡ä»¶æ„é€ å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;          å®ä½“ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å®ä½“ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> &lt;T&gt; Class&lt;T&gt; <span class="title function_">getEntityClass</span><span class="params">(AbstractWrapper&lt;T, ?, ?&gt; queryWrapper)</span> &#123;</span><br><span class="line">        Class&lt;T&gt; entityClass = queryWrapper.getEntityClass();</span><br><span class="line">        <span class="keyword">if</span> (entityClass == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">T</span> <span class="variable">entity</span> <span class="operator">=</span> queryWrapper.getEntity();</span><br><span class="line">            <span class="keyword">if</span> (entity != <span class="literal">null</span>) &#123;</span><br><span class="line">                entityClass = getEntityClass(entity);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Assert.notNull(entityClass, <span class="string">&quot;error: can not get entityClass from wrapper&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> entityClass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»entityä¸­å°è¯•è·å–å®ä½“ç±»å‹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entity å®ä½“</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;    å®ä½“ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å®ä½“ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> &lt;T&gt; Class&lt;T&gt; <span class="title function_">getEntityClass</span><span class="params">(T entity)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (Class&lt;T&gt;) entity.getClass();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–è¡¨ä¿¡æ¯ï¼Œè·å–ä¸åˆ°æŠ¥é”™æç¤º</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> entityClass å®ä½“ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;         å®ä½“ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¯¹åº”è¡¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> &lt;T&gt; TableInfo <span class="title function_">getTableInfo</span><span class="params">(Class&lt;T&gt; entityClass)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Optional.ofNullable(TableInfoHelper.getTableInfo(entityClass)).orElseThrow(() -&gt; ExceptionUtils.mpe(<span class="string">&quot;error: can not find TableInfo from Class: \&quot;%s\&quot;.&quot;</span>, entityClass.getName()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDbGet</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> Db.getById(<span class="number">1L</span>, User.class);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDbList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ©ç”¨Dbå®ç°å¤æ‚æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line">    List&lt;User&gt; list = Db.lambdaQuery(User.class)</span><br><span class="line">            .like(User::getUsername, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">            .ge(User::getBalance, <span class="number">1000</span>)</span><br><span class="line">            .list();</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDbUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">    Db.lambdaUpdate(User.class)</span><br><span class="line">            .set(User::getBalance, <span class="number">2000</span>)</span><br><span class="line">            .eq(User::getUsername, <span class="string">&quot;Rose&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éœ€æ±‚ï¼šæ”¹é€ æ ¹æ® id æŸ¥è¯¢ç”¨æˆ·æ¥å£ï¼ŒæŸ¥è¯¢ç”¨æˆ·çš„åŒæ—¶è¿”å›ç”¨æˆ·æ”¶è·åœ°å€åˆ—è¡¨ï¼š</p><p><strong>UserVOï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·è¡¨VO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lixuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2024/8/7 17:33</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserVO</span> <span class="keyword">extends</span> <span class="title class_">UserEntity</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Serial</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Schema(description = &quot;åœ°å€åˆ—è¡¨&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;AddressVO&gt; addressList;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä¸€ä¸ªåœ°å€åˆ—è¡¨çš„å±æ€§</p><p><strong>UserControllerï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢ç”¨æˆ·å¹¶ä¸”å¯¹åº”å…¶åœ°å€è¶³è¿¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/getUserAndAddress/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@Operation(summary = &quot;æŸ¥è¯¢ç”¨æˆ·å¹¶ä¸”å¯¹åº”å…¶åœ°å€è¶³è¿¹ getUserAndAddress/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> UserVO <span class="title function_">getUserAndAddress</span><span class="params">(<span class="meta">@Parameter(description = &quot;ç”¨æˆ·ID&quot;)</span> <span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">    <span class="comment">//è·å–ç”¨æˆ·</span></span><br><span class="line">    <span class="type">UserEntity</span> <span class="variable">userEntity</span> <span class="operator">=</span> userService.getById(id);</span><br><span class="line">    <span class="keyword">if</span> (userEntity == <span class="literal">null</span> || userEntity.getStatus() == UserStatus.FREEZE) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·çŠ¶æ€å¼‚å¸¸ï¼ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è½¬æ¢Vo</span></span><br><span class="line">    <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> BeanUtil.copyProperties(userEntity, UserVO.class);</span><br><span class="line">    <span class="comment">//è·å–åœ°å€åˆ—è¡¨</span></span><br><span class="line">    List&lt;AddressEntity&gt; addressEntityList = addressService.list(Wrappers.lambdaQuery(AddressEntity.class)</span><br><span class="line">            .eq(AddressEntity::getUserId, id));</span><br><span class="line">    <span class="comment">//è½¬æ¢åˆ—è¡¨VO</span></span><br><span class="line">    <span class="keyword">if</span> (CollUtil.isNotEmpty(addressEntityList)) &#123;</span><br><span class="line">        List&lt;AddressVO&gt; addressVOList = BeanUtil.copyToList(addressEntityList, AddressVO.class);</span><br><span class="line">        userVO.setAddressList(addressVOList);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> userVO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éœ€æ±‚ï¼šæ ¹æ®idæ‰¹é‡æŸ¥è¯¢ç”¨æˆ·ï¼Œå¹¶æŸ¥è¯¢å‡ºç”¨æˆ·å¯¹åº”çš„æ‰€æœ‰åœ°å€</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idsæ‰¹é‡æŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/getUserByIds&quot;)</span></span><br><span class="line"><span class="meta">@Operation(summary = &quot;æ ¹æ®idsæ‰¹é‡æŸ¥è¯¢ getUserByIds&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;UserVO&gt; <span class="title function_">getUserByIds</span><span class="params">(<span class="meta">@RequestParam</span> List&lt;Long&gt; ids)</span> &#123;</span><br><span class="line">    <span class="comment">//1ã€æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">    List&lt;UserEntity&gt; userEntityList = userService.listByIds(ids);</span><br><span class="line">    <span class="keyword">if</span> (CollUtil.isEmpty(userEntityList)) &#123;</span><br><span class="line">        <span class="keyword">return</span> Collections.emptyList();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2æŸ¥è¯¢åœ°å€åˆ—è¡¨</span></span><br><span class="line">    List&lt;AddressEntity&gt; addressEntityList = addressService.list(Wrappers.lambdaQuery(AddressEntity.class)</span><br><span class="line">            .in(AddressEntity::getUserId, ids));</span><br><span class="line">    <span class="comment">//è½¬ä¸ºVoåˆ—è¡¨</span></span><br><span class="line">    List&lt;UserVO&gt; userVOList = BeanUtil.copyToList(userEntityList, UserVO.class);</span><br><span class="line">    <span class="comment">//æ ¹æ®UserIdè½¬ä¸ºMap</span></span><br><span class="line">    Map&lt;Long, List&lt;AddressEntity&gt;&gt; addressEntityMap = addressEntityList.stream()</span><br><span class="line">            .collect(Collectors.groupingBy(AddressEntity::getUserId));</span><br><span class="line">    userVOList.forEach(userVO -&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (userVO.getStatus() == UserStatus.FREEZE) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;ç”¨æˆ·&#123;&#125;çŠ¶æ€å¼‚å¸¸ï¼ï¼&quot;</span>, userVO.getUsername());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1ã€è·å–å¯¹åº”åœ°å€åˆ—è¡¨</span></span><br><span class="line">        Optional.ofNullable(addressEntityMap.get(userVO.getId()))</span><br><span class="line">                .ifPresent(addressEntities -&gt; &#123;</span><br><span class="line">                    <span class="comment">//2ã€è½¬æ¢ä¸ºVoåœ°å€åˆ—è¡¨</span></span><br><span class="line">                    List&lt;AddressVO&gt; addressVOList = BeanUtil.copyToList(addressEntities, AddressVO.class);</span><br><span class="line">                    <span class="comment">//3ã€æ³¨å…¥Vo</span></span><br><span class="line">                    userVO.setAddressList(addressVOList);</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> userVOList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="â…¢-é€»è¾‘åˆ é™¤"><a href="#â…¢-é€»è¾‘åˆ é™¤" class="headerlink" title="â…¢ é€»è¾‘åˆ é™¤"></a>â…¢ é€»è¾‘åˆ é™¤</h2><p>å¯¹äºä¸€äº›æ¯”è¾ƒé‡è¦çš„æ•°æ®ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šé‡‡ç”¨é€»è¾‘åˆ é™¤çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶å†²æ•°æ®åº“ä¸­åˆ é™¤ã€‚</p><ul><li>åœ¨è¡¨ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µæ ‡è®°æ•°æ®æ˜¯å¦è¢«åˆ é™¤</li><li>å½“åˆ é™¤æ•°æ®æ—¶æŠŠæ ‡è®°ç½®ä¸ºtrue</li><li>æŸ¥è¯¢æ—¶è¿‡æ»¤æ‰æ ‡è®°ä¸ºtrueçš„æ•°æ®</li></ul><p><strong>MybatisPlus</strong> å°±æ·»åŠ äº†å¯¹é€»è¾‘åˆ é™¤çš„æ”¯æŒï¼š</p><p><code>æ³¨æ„ï¼Œåªæœ‰MybatisPlusç”Ÿæˆçš„SQLè¯­å¥æ‰æ”¯æŒè‡ªåŠ¨çš„é€»è¾‘åˆ é™¤ï¼Œè‡ªå®šä¹‰SQLéœ€è¦è‡ªå·±æ‰‹åŠ¨å¤„ç†é€»è¾‘åˆ é™¤ã€‚</code></p><p>ä¾‹å¦‚ï¼Œç»™ <strong>adress</strong> è¡¨æ·»åŠ é€»è¾‘åˆ é™¤å­—æ®µï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> address <span class="keyword">add</span> deleted bit <span class="keyword">default</span> b<span class="string">&#x27;0&#x27;</span> <span class="keyword">null</span> comment <span class="string">&#x27;é€»è¾‘åˆ é™¤&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>AdressEntityï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ°å€è¡¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lixuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@TableName</span> address</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(value =&quot;address&quot;)</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;åœ°å€è¡¨&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddressEntity</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;id&quot;)</span></span><br><span class="line">    <span class="meta">@TableId(value = &quot;id&quot;, type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·ID&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;user_id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long userId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;çœ&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;province&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¸‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;å¸‚&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;city&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¿/åŒº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;å¿/åŒº&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;town&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String town;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰‹æœº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ‰‹æœº&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;mobile&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String mobile;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯¦ç»†åœ°å€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;è¯¦ç»†åœ°å€&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;street&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String street;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è”ç³»äºº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;è”ç³»äºº&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;contact&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String contact;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ˜¯å¦æ˜¯é»˜è®¤ 1é»˜è®¤ 0å¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ˜¯å¦æ˜¯é»˜è®¤ 1é»˜è®¤ 0å¦&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;is_default&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean isDefault;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤‡æ³¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;å¤‡æ³¨&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;notes&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String notes;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€»è¾‘åˆ é™¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Schema(description = &quot;é€»è¾‘åˆ é™¤&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;deleted&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean deleted;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Serial</span></span><br><span class="line">    <span class="meta">@TableField(exist = false)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>application.ymlï¼š</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">deleted</span> <span class="comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå(since 3.3.0,é…ç½®åå¯ä»¥å¿½ç•¥ä¸é…ç½®æ­¥éª¤2)</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span></span><br></pre></td></tr></table></figure><p>æ–¹æ³•ä¸æ™®é€šçš„æ–¹æ³•ä¸€æ ·ï¼Œä½†æ˜¯åº•å±‚çš„é€»è¾‘å·²ç»æ”¹å˜äº†ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v22.png" alt="AbstractWrapper"></p><p>æŸ¥è¯¢ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQuery</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;Address&gt; list = addressService.list();</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼šå‘ç° <strong>id</strong> ä¸º59çš„ç¡®å®æ²¡æœ‰æŸ¥è¯¢å‡ºæ¥ï¼Œè€Œä¸” <strong>SQL</strong> ä¸­ä¹Ÿå¯¹é€»è¾‘åˆ é™¤å­—æ®µåšäº†åˆ¤æ–­ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v23.png" alt="AbstractWrapper"></p><p>ç»¼ä¸Šï¼Œ å¼€å¯äº†é€»è¾‘åˆ é™¤åŠŸèƒ½ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒæ™®é€šåˆ é™¤ä¸€æ ·åšCRUDï¼ŒåŸºæœ¬ä¸ç”¨è€ƒè™‘ä»£ç é€»è¾‘é—®é¢˜ã€‚è¿˜æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼š é€»è¾‘åˆ é™¤æœ¬èº«ä¹Ÿæœ‰è‡ªå·±çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p><ul><li>ä¼šå¯¼è‡´æ•°æ®åº“è¡¨åƒåœ¾æ•°æ®è¶Šæ¥è¶Šå¤šï¼Œä»è€Œå½±å“æŸ¥è¯¢æ•ˆç‡</li><li>SQLä¸­å…¨éƒ½éœ€è¦å¯¹é€»è¾‘åˆ é™¤å­—æ®µåšåˆ¤æ–­ï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡</li></ul></blockquote><h2 id="â…£-é€šç”¨æšä¸¾"><a href="#â…£-é€šç”¨æšä¸¾" class="headerlink" title="â…£ é€šç”¨æšä¸¾"></a>â…£ é€šç”¨æšä¸¾</h2><p><strong>UserEntity</strong> ä¸­æœ‰ä¸€ä¸ªç”¨æˆ·çŠ¶æ€</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v24.png" alt="AbstractWrapper"></p><p>åƒè¿™ç§å­—æ®µï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå®šä¹‰ä¸€ä¸ªæšä¸¾ï¼Œåšä¸šåŠ¡åˆ¤æ–­çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥åŸºäºæšä¸¾æ¯”è¾ƒï¼Œä½†æ˜¯æˆ‘ä»¬æ•°æ®åº“é‡‡ç”¨çš„æ˜¯ <strong>int</strong> å‹ï¼Œå¯¹åº”çš„ <strong>PO</strong> ä¹Ÿæ˜¯ä¸€ä¸ª <strong>Integer</strong> ã€‚å› æ­¤ä¸šåŠ¡æ“ä½œæ—¶å¿…é¡»æ‰‹åŠ¨è½¬æ¢æšä¸¾å’Œ <strong>Integer</strong> ã€‚</p><p>ä½†æ˜¯ <strong>MybatisPlus</strong> æä¾›äº†ä¸€ä¸ªå¤„ç†æšä¸¾ç±»å‹çš„ç±»å‹è½¬æ¢å™¨ï¼Œå¯ä»¥å¸®æˆ‘ä»¬æŠŠ<code>æšä¸¾ç±»å‹å’Œæ•°æ®åº“ç±»å‹è‡ªåŠ¨è½¬æ¢</code>ã€‚</p><h3 id="â‘ -å®šä¹‰æšä¸¾"><a href="#â‘ -å®šä¹‰æšä¸¾" class="headerlink" title="â‘  å®šä¹‰æšä¸¾"></a>â‘  å®šä¹‰æšä¸¾</h3><p>å®šä¹‰ä¸€ä¸ªç”¨æˆ·çŠ¶æ€æšä¸¾ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v25.png" alt="AbstractWrapper"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">UserStatus</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·è´¦å·çŠ¶æ€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    NORMAL(<span class="number">1</span>, <span class="string">&quot;æ­£å¸¸&quot;</span>),</span><br><span class="line">    FREEZE(<span class="number">2</span>, <span class="string">&quot;å†»ç»“&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EnumValue</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> value;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * JSON å“åº”æ—¶è¿”å›çš„å±æ€§å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JsonValue</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String desc;</span><br><span class="line"></span><br><span class="line">    UserStatus(<span class="type">int</span> value, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°† <code>UserEntity</code> ç±»ä¸­çš„ <code>status</code> å­—æ®µæ”¹ä¸º <code>UserStatus</code> ç±»å‹ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v26.png" alt="AbstractWrapper"></p><p>å½“ç„¶ï¼Œè¦è®© <code>MybatisPlus</code> å¤„ç†æšä¸¾ä¸æ•°æ®åº“è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œæˆ‘ä»¬å¿…é¡»è¦å‘Šè¯‰ <code>MybatisPlus</code> ï¼Œæšä¸¾ä¸­çš„å“ªä¸ªå­—æ®µå€¼ä½œä¸ºæ•°æ®åº“å€¼ã€‚</p><p><code>MybatisPlus</code> æä¾›äº† <code>@EnumValue</code> æ¥æ ‡è®°æšä¸¾å±æ€§</p><h3 id="â‘¡-é…ç½®æšä¸¾å¤„ç†å™¨"><a href="#â‘¡-é…ç½®æšä¸¾å¤„ç†å™¨" class="headerlink" title="â‘¡ é…ç½®æšä¸¾å¤„ç†å™¨"></a>â‘¡ é…ç½®æšä¸¾å¤„ç†å™¨</h3><p>åœ¨ <strong>application.yml</strong> ä¸­æ·»åŠ é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æšä¸¾å¤„ç†æµ‹è¯•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testService</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;UserEntity&gt; list = userService.list();</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆï¼ŒæŸ¥è¯¢å‡ºçš„<code>User</code>ç±»çš„<code>status</code>å­—æ®µä¼šæ˜¯æšä¸¾ç±»å‹ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v27.png" alt="AbstractWrapper"></p><p>åŒæ—¶ï¼Œä¸ºäº†ä½¿é¡µé¢æŸ¥è¯¢ç»“æœä¹Ÿæ˜¯æšä¸¾æ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹UserVOä¸­çš„statuså±æ€§</p><p>å¹¶ä¸”ï¼Œåœ¨UserStatusæšä¸¾ä¸­é€šè¿‡<code>@JsonValue</code>æ³¨è§£æ ‡è®°JSONåºåˆ—åŒ–æ—¶å±•ç¤ºçš„å­—æ®µï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v28.png" alt="AbstractWrapper"></p><p>æœ€åï¼Œåœ¨é¡µé¢æŸ¥è¯¢ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v29.png" alt="AbstractWrapper"></p><h2 id="â…¤-JSON-ç±»å‹å¤„ç†å™¨"><a href="#â…¤-JSON-ç±»å‹å¤„ç†å™¨" class="headerlink" title="â…¤ JSON ç±»å‹å¤„ç†å™¨"></a>â…¤ JSON ç±»å‹å¤„ç†å™¨</h2><p>æ•°æ®åº“çš„userè¡¨ä¸­æœ‰ä¸€ä¸ª<code>info</code>å­—æ®µï¼Œæ˜¯ <strong>JSON</strong> ç±»å‹ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v30.png" alt="AbstractWrapper"></p><p>æ ¼å¼ï¼š</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span> <span class="attr">&quot;intro&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½›ç³»é’å¹´&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;male&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è€Œç›®å‰<code>UserEntity</code>å®ä½“ç±»ä¸­å´æ˜¯<code>String</code>ç±»å‹ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v31.png" alt="AbstractWrapper"></p><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬è¦è¯»å–infoä¸­çš„å±æ€§æ—¶å°±éå¸¸ä¸æ–¹ä¾¿ã€‚å¦‚æœè¦æ–¹ä¾¿è·å–ï¼Œinfoçš„ç±»å‹æœ€å¥½æ˜¯ä¸€ä¸ª<code>Map</code>æˆ–è€…å®ä½“ç±»ã€‚</p><p>è€Œä¸€æ—¦æˆ‘ä»¬æŠŠ<code>info</code>æ”¹ä¸º<code>å¯¹è±¡</code>ç±»å‹ï¼Œå°±éœ€è¦åœ¨å†™å…¥æ•°æ®åº“æ—¶æ‰‹åŠ¨è½¬ä¸º<code>String</code>ï¼Œå†è¯»å–æ•°æ®åº“æ—¶ï¼Œæ‰‹åŠ¨è½¬æ¢ä¸º<code>å¯¹è±¡</code>ï¼Œè¿™ä¼šéå¸¸éº»çƒ¦ã€‚</p><p>å› æ­¤MybatisPlusæä¾›äº†å¾ˆå¤šç‰¹æ®Šç±»å‹å­—æ®µçš„ç±»å‹å¤„ç†å™¨ï¼Œè§£å†³ç‰¹æ®Šå­—æ®µç±»å‹ä¸æ•°æ®åº“ç±»å‹è½¬æ¢çš„é—®é¢˜ã€‚ä¾‹å¦‚å¤„ç†JSONå°±å¯ä»¥ä½¿ç”¨<code>JacksonTypeHandler</code>å¤„ç†å™¨ã€‚</p><h3 id="â‘ -å®šä¹‰å®ä½“"><a href="#â‘ -å®šä¹‰å®ä½“" class="headerlink" title="â‘  å®šä¹‰å®ä½“"></a>â‘  å®šä¹‰å®ä½“</h3><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v32.png" alt="AbstractWrapper"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Json UserInfo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lixuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2024/8/9 9:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor(staticName = &quot;of&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserInfo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String intro;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="â‘¡-ä½¿ç”¨ç±»å‹å¤„ç†å™¨"><a href="#â‘¡-ä½¿ç”¨ç±»å‹å¤„ç†å™¨" class="headerlink" title="â‘¡ ä½¿ç”¨ç±»å‹å¤„ç†å™¨"></a>â‘¡ ä½¿ç”¨ç±»å‹å¤„ç†å™¨</h3><p>å°† UserEntity ç±»çš„ info å­—æ®µä¿®æ”¹ä¸º UserInfo ç±»å‹ï¼Œå¹¶å£°æ˜ç±»å‹å¤„ç†å™¨ï¼š</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v33.png" alt="AbstractWrapper"></p><h1 id="æ’ä»¶åŠŸèƒ½"><a href="#æ’ä»¶åŠŸèƒ½" class="headerlink" title="æ’ä»¶åŠŸèƒ½"></a>æ’ä»¶åŠŸèƒ½</h1><p>MybatisPlusæä¾›äº†å¾ˆå¤šçš„æ’ä»¶åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥æ‹“å±•å…¶åŠŸèƒ½ã€‚ç›®å‰å·²æœ‰çš„æ’ä»¶æœ‰ï¼š</p><ul><li><code>PaginationInnerInterceptor</code>ï¼šè‡ªåŠ¨åˆ†é¡µ</li><li><code>TenantLineInnerInterceptor</code>ï¼šå¤šç§Ÿæˆ·</li><li><code>DynamicTableNameInnerInterceptor</code>ï¼šåŠ¨æ€è¡¨å</li><li><code>OptimisticLockerInnerInterceptor</code>ï¼šä¹è§‚é”</li><li><code>IllegalSQLInnerInterceptor</code>ï¼šsql æ€§èƒ½è§„èŒƒ</li><li><code>BlockAttackInnerInterceptor</code>ï¼šé˜²æ­¢å…¨è¡¨æ›´æ–°ä¸åˆ é™¤</li></ul><blockquote><p><strong>æ³¨æ„ï¼š</strong> ä½¿ç”¨å¤šä¸ªåˆ†é¡µæ’ä»¶çš„æ—¶å€™éœ€è¦æ³¨æ„æ’ä»¶å®šä¹‰é¡ºåºï¼Œå»ºè®®ä½¿ç”¨é¡ºåºå¦‚ä¸‹ï¼š</p><ul><li>å¤šç§Ÿæˆ·,åŠ¨æ€è¡¨å</li><li>åˆ†é¡µ,ä¹è§‚é”</li><li>sql æ€§èƒ½è§„èŒƒ,é˜²æ­¢å…¨è¡¨æ›´æ–°ä¸åˆ é™¤</li></ul></blockquote><h2 id="â… åˆ†é¡µæ’ä»¶"><a href="#â… åˆ†é¡µæ’ä»¶" class="headerlink" title="â… åˆ†é¡µæ’ä»¶"></a>â… åˆ†é¡µæ’ä»¶</h2><p>åœ¨æœªå¼•å…¥åˆ†é¡µæ’ä»¶çš„æƒ…å†µä¸‹ï¼Œ<code>MybatisPlus</code>æ˜¯ä¸æ”¯æŒåˆ†é¡µåŠŸèƒ½çš„ï¼Œ<code>IService</code>å’Œ<code>BaseMapper</code>ä¸­çš„åˆ†é¡µæ–¹æ³•éƒ½æ— æ³•æ­£å¸¸èµ·æ•ˆã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»é…ç½®åˆ†é¡µæ’ä»¶ã€‚</p><h3 id="â‘ -é…ç½®åˆ†é¡µæ’ä»¶"><a href="#â‘ -é…ç½®åˆ†é¡µæ’ä»¶" class="headerlink" title="â‘  é…ç½®åˆ†é¡µæ’ä»¶"></a>â‘  é…ç½®åˆ†é¡µæ’ä»¶</h3><p>åœ¨ <strong>config</strong> ä¸‹é…ç½®åˆ†é¡µæ’ä»¶</p><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v34.png" alt="AbstractWrapper"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é¡µæ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lixuan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2024/8/8 9:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®šä¹‰ä¸€ä¸ªmybatisPlusçš„æ‹¦æˆªå™¨ å† addä¸€ä¸ªåˆ†é¡µæ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//1.åˆå§‹åŒ–æ ¸å¿ƒæ’ä»¶</span></span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">mybatisPlusInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">//2.æ·»åŠ åˆ†é¡µæ’ä»¶</span></span><br><span class="line">        mybatisPlusInterceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> mybatisPlusInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="â‘¡-åˆ†é¡µ-API"><a href="#â‘¡-åˆ†é¡µ-API" class="headerlink" title="â‘¡ åˆ†é¡µ API"></a>â‘¡ åˆ†é¡µ API</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é¡µæµ‹è¯•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testPageQuery</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.åˆ†é¡µæŸ¥è¯¢ï¼Œnew Page()çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼šé¡µç ã€æ¯é¡µå¤§å°</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">current</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    Page&lt;UserEntity&gt; page = Page.of(current, size);</span><br><span class="line">    <span class="comment">// 1.2ã€æ’åº</span></span><br><span class="line">    page.addOrder(OrderItem.asc(<span class="string">&quot;balance&quot;</span>));</span><br><span class="line">    page.addOrder(OrderItem.desc(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">    Page&lt;UserEntity&gt; p = userService.page(page);</span><br><span class="line">    <span class="comment">// 2.æ€»æ¡æ•°</span></span><br><span class="line">    System.out.println(<span class="string">&quot;total = &quot;</span> + p.getTotal());</span><br><span class="line">    <span class="comment">// 3.æ€»é¡µæ•°</span></span><br><span class="line">    System.out.println(<span class="string">&quot;pages = &quot;</span> + p.getPages());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.æ•°æ®</span></span><br><span class="line">    List&lt;UserEntity&gt; records = p.getRecords();</span><br><span class="line">    records.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/load.gif" data-original="/images/frameworks/Java/mybatisplus/a/v35.png" alt="AbstractWrapper"></p><p>è¿™é‡Œç”¨åˆ°äº†åˆ†é¡µå‚æ•°ï¼Œ<strong>Page</strong> ï¼Œå³å¯ä»¥æ”¯æŒåˆ†é¡µå‚æ•°ï¼Œä¹Ÿå¯ä»¥æ”¯æŒæ’åºå‚æ•°ã€‚å¸¸è§çš„ <strong>API</strong> å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">pageNo</span> <span class="operator">=</span> <span class="number">1</span>, pageSize = <span class="number">5</span>;</span><br><span class="line"><span class="comment">// åˆ†é¡µå‚æ•°</span></span><br><span class="line">Page&lt;User&gt; page = Page.of(pageNo, pageSize);</span><br><span class="line"><span class="comment">// æ’åºå‚æ•°, é€šè¿‡OrderItemæ¥æŒ‡å®š</span></span><br><span class="line">page.addOrder(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(<span class="string">&quot;balance&quot;</span>, <span class="literal">false</span>));</span><br><span class="line"></span><br><span class="line">userService.page(page);</span><br></pre></td></tr></table></figure><h2 id="â…¡-é€šç”¨åˆ†é¡µå®ä½“"><a href="#â…¡-é€šç”¨åˆ†é¡µå®ä½“" class="headerlink" title="â…¡ é€šç”¨åˆ†é¡µå®ä½“"></a>â…¡ é€šç”¨åˆ†é¡µå®ä½“</h2><p>ç°åœ¨è¦å®ç°ä¸€ä¸ªç”¨æˆ·åˆ†é¡µæŸ¥è¯¢çš„æ¥å£ï¼Œæ¥å£è§„èŒƒå¦‚ä¸‹ï¼š</p><table border="1" cellpadding="10" cellspacing="0" style="border-collapse: collapse; width: 100%; text-align: left;">  <thead>    <tr>      <th style="background-color: #e0f7fa; color: #00796b;">å‚æ•°</th>      <th style="background-color: #e0f7fa; color: #00796b;">è¯´æ˜</th>    </tr>  </thead>  <tbody>    <tr>      <td>è¯·æ±‚æ–¹å¼</td>      <td>GET</td>    </tr>    <tr>      <td>è¯·æ±‚è·¯å¾„</td>      <td>/users/page</td>    </tr>    <tr>      <td>è¯·æ±‚å‚æ•°</td>      <td>        <pre style="background-color: #050917; border: 1px solid rgb(5,9,23); border-radius: 4px; padding: 10px;">{  "pageNo": 1,  "pageSize": 5,  "sortBy": "balance",  "isAsc": false,  "name": "o",  "status": 1}        </pre>      </td>    </tr>    <tr>      <td>è¿”å›å€¼</td>      <td>        <pre style="background-color: #050917; border: 1px solid rgb(5,9,23); border-radius: 4px; padding: 10px;">{  "total": 100006,  "pages": 50003,  "list": [    {      "id": 1685100878975279298,      "username": "user_9****",      "info": {        "age": 24,        "intro": "è‹±æ–‡è€å¸ˆ",        "gender": "female"      },      "status": "æ­£å¸¸",      "balance": 2000    }  ]}        </pre>      </td>    </tr>    <tr>      <td>ç‰¹æ®Šè¯´æ˜</td>      <td>å¦‚æœæ’åºå­—æ®µä¸ºç©ºï¼Œé»˜è®¤æŒ‰ç…§æ›´æ–°æ—¶é—´æ’åºï¼›å¦‚æœæ’åºå­—æ®µä¸ä¸ºç©ºï¼Œåˆ™æŒ‰ç…§æ’åºå­—æ®µæ’åºã€‚</td>    </tr>  </tbody></table><p>è¿™é‡Œéœ€è¦å®šä¹‰3ä¸ªå®ä½“ï¼š</p><ul><li><code>UserQuery</code>ï¼šåˆ†é¡µæŸ¥è¯¢æ¡ä»¶çš„å®ä½“ï¼ŒåŒ…å«åˆ†é¡µã€æ’åºå‚æ•°ã€è¿‡æ»¤æ¡ä»¶</li><li><code>PageDTO</code>ï¼šåˆ†é¡µç»“æœå®ä½“ï¼ŒåŒ…å«æ€»æ¡æ•°ã€æ€»é¡µæ•°ã€å½“å‰é¡µæ•°æ®</li><li><code>UserVO</code>ï¼šç”¨æˆ·é¡µé¢è§†å›¾å®ä½“</li></ul><h3 id="â‘ -å®ä½“"><a href="#â‘ -å®ä½“" class="headerlink" title="â‘  å®ä½“"></a>â‘  å®ä½“</h3><p><strong>UserQueryï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = true)</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;ç”¨æˆ·æŸ¥è¯¢æ¡ä»¶å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserQuery</span> <span class="keyword">extends</span> <span class="title class_">PageQuery</span> &#123;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·åå…³é”®å­—&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;ç”¨æˆ·çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ2-å†»ç»“&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;ä½™é¢æœ€å°å€¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer minBalance;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;ä½™é¢æœ€å¤§å€¼&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer maxBalance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>PageQueryï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;åˆ†é¡µæŸ¥è¯¢å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageQuery</span> &#123;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;é¡µç &quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long pageNo;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;é¡µç &quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long pageSize;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ’åºå­—æ®µ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sortBy;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ˜¯å¦å‡åº&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean isAsc;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="title function_">toMpPage</span><span class="params">(OrderItem... orders)</span>&#123;</span><br><span class="line">        <span class="comment">// 1.åˆ†é¡µæ¡ä»¶</span></span><br><span class="line">        Page&lt;T&gt; p = Page.of(pageNo, pageSize);</span><br><span class="line">        <span class="comment">// 2.æ’åºæ¡ä»¶</span></span><br><span class="line">        <span class="comment">// 2.1.å…ˆçœ‹å‰ç«¯æœ‰æ²¡æœ‰ä¼ æ’åºå­—æ®µ</span></span><br><span class="line">        <span class="keyword">if</span> (sortBy != <span class="literal">null</span>) &#123;</span><br><span class="line">            p.addOrder(isAsc!= <span class="literal">null</span>&amp;&amp; isAsc ? OrderItem.asc(sortBy) : OrderItem.desc(sortBy));</span><br><span class="line">            <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.2.å†çœ‹æœ‰æ²¡æœ‰æ‰‹åŠ¨æŒ‡å®šæ’åºå­—æ®µ</span></span><br><span class="line">        <span class="keyword">if</span>(orders != <span class="literal">null</span>)&#123;</span><br><span class="line">            p.addOrder(orders);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="title function_">toMpPage</span><span class="params">(String defaultSortBy, <span class="type">boolean</span> isAsc)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.toMpPage(isAsc ? OrderItem.asc(defaultSortBy) : OrderItem.desc(defaultSortBy));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="title function_">toMpPageDefaultSortByCreateTimeDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> toMpPage(<span class="string">&quot;create_time&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="title function_">toMpPageDefaultSortByUpdateTimeDesc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> toMpPage(<span class="string">&quot;update_time&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>PageQuery</code>æ˜¯å‰ç«¯æäº¤çš„æŸ¥è¯¢å‚æ•°ï¼Œä¸€èˆ¬åŒ…å«å››ä¸ªå±æ€§ï¼š</p><ul><li><code>pageNo</code>ï¼šé¡µç </li><li><code>pageSize</code>ï¼šæ¯é¡µæ•°æ®æ¡æ•°</li><li><code>sortBy</code>ï¼šæ’åºå­—æ®µ</li><li><code>isAsc</code>ï¼šæ˜¯å¦å‡åº</li></ul><p><strong>PageDTOï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Schema(description = &quot;åˆ†é¡µç»“æœ&quot;)</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageDTO</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ€»æ¡æ•°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long total;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;æ€»é¡µæ•°&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long pages;</span><br><span class="line">    <span class="meta">@Schema(description = &quot;é›†åˆ&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;T&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›ç©ºåˆ†é¡µç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> p MybatisPlusçš„åˆ†é¡µç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;V&gt; ç›®æ ‡VOç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;P&gt; åŸå§‹POç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> VOçš„åˆ†é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;V, P&gt; PageDTO&lt;V&gt; <span class="title function_">empty</span><span class="params">(Page&lt;P&gt; p)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(p.getTotal(), p.getPages(), Collections.emptyList());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†MybatisPlusåˆ†é¡µç»“æœè½¬ä¸º VOåˆ†é¡µç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> p MybatisPlusçš„åˆ†é¡µç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> voClass ç›®æ ‡VOç±»å‹çš„å­—èŠ‚ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;V&gt; ç›®æ ‡VOç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;P&gt; åŸå§‹POç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> VOçš„åˆ†é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;V, P&gt; PageDTO&lt;V&gt; <span class="title function_">of</span><span class="params">(Page&lt;P&gt; p, Class&lt;V&gt; voClass)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.éç©ºæ ¡éªŒ</span></span><br><span class="line">        List&lt;P&gt; records = p.getRecords();</span><br><span class="line">        <span class="keyword">if</span> (records == <span class="literal">null</span> || records.size() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ— æ•°æ®ï¼Œè¿”å›ç©ºç»“æœ</span></span><br><span class="line">            <span class="keyword">return</span> empty(p);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.æ•°æ®è½¬æ¢</span></span><br><span class="line">        List&lt;V&gt; vos = BeanUtil.copyToList(records, voClass);</span><br><span class="line">        <span class="comment">// 3.å°è£…è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(p.getTotal(), p.getPages(), vos);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†MybatisPlusåˆ†é¡µç»“æœè½¬ä¸º VOåˆ†é¡µç»“æœï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰POåˆ°VOçš„è½¬æ¢æ–¹å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> p MybatisPlusçš„åˆ†é¡µç»“æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> convertor POåˆ°VOçš„è½¬æ¢å‡½æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;V&gt; ç›®æ ‡VOç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;P&gt; åŸå§‹POç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> VOçš„åˆ†é¡µå¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;V, P&gt; PageDTO&lt;V&gt; <span class="title function_">of</span><span class="params">(Page&lt;P&gt; p, Function&lt;P, V&gt; convertor)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.éç©ºæ ¡éªŒ</span></span><br><span class="line">        List&lt;P&gt; records = p.getRecords();</span><br><span class="line">        <span class="keyword">if</span> (records == <span class="literal">null</span> || records.size() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// æ— æ•°æ®ï¼Œè¿”å›ç©ºç»“æœ</span></span><br><span class="line">            <span class="keyword">return</span> empty(p);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2.æ•°æ®è½¬æ¢</span></span><br><span class="line">        List&lt;V&gt; vos = records.stream().map(convertor).collect(Collectors.toList());</span><br><span class="line">        <span class="comment">// 3.å°è£…è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(p.getTotal(), p.getPages(), vos);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="â‘¡-å¼€å‘æ¥å£"><a href="#â‘¡-å¼€å‘æ¥å£" class="headerlink" title="â‘¡ å¼€å‘æ¥å£"></a>â‘¡ å¼€å‘æ¥å£</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é¡µæŸ¥è¯¢ page</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line"><span class="meta">@Operation(summary = &quot;åˆ†é¡µæŸ¥è¯¢ page&quot;)</span></span><br><span class="line"><span class="keyword">public</span> PageDTO&lt;UserVO&gt; <span class="title function_">queryUsersPage</span><span class="params">(<span class="meta">@ParameterObject</span> UserQuery query)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;queryUsersPage ===&gt; &#123;&#125;&quot;</span>, query);</span><br><span class="line">    Page&lt;UserEntity&gt; userEntityPage = userService.page(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;UserEntity&gt;(query.getPageNo(), query.getPageSize())</span><br><span class="line">                    .addOrder(ObjectUtil.isEmpty(query.getSortBy()) ?</span><br><span class="line">                            OrderItem.desc(<span class="string">&quot;update_time&quot;</span>) :</span><br><span class="line">                            (query.getIsAsc() != <span class="literal">null</span> &amp;&amp; query.getIsAsc() ?</span><br><span class="line">                                    OrderItem.asc(query.getSortBy()) :</span><br><span class="line">                                    OrderItem.desc(query.getSortBy()))),</span><br><span class="line">            Wrappers.lambdaQuery(UserEntity.class)</span><br><span class="line">                    .like(StrUtil.isNotBlank(query.getName()), UserEntity::getUsername, query.getName())</span><br><span class="line">                    .between(query.getMinBalance() != <span class="literal">null</span> &amp;&amp; query.getMaxBalance() != <span class="literal">null</span>, UserEntity::getBalance, query.getMinBalance(), query.getMaxBalance()));</span><br><span class="line">    System.out.println(<span class="string">&quot;userEntityPage = &quot;</span> + userEntityPage.getRecords());</span><br><span class="line">    <span class="comment">//è½¬æ¢ä¸ºVo</span></span><br><span class="line">    List&lt;UserVO&gt; userVOList = BeanUtil.copyToList(userEntityPage.getRecords(), UserVO.class);</span><br><span class="line">    PageDTO&lt;UserVO&gt; userVoPageDTO = <span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;(userEntityPage.getCurrent(), userEntityPage.getSize(), userVOList);</span><br><span class="line">    userVoPageDTO.setTotal(userEntityPage.getTotal());</span><br><span class="line">    System.out.println(<span class="string">&quot;userVoPageDTO = &quot;</span> + userVoPageDTO.getPages());</span><br><span class="line">    <span class="keyword">return</span> userService.queryUsersPage(query);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> SpringCloud </category>
          
          <category> å¼€å‘æ¡†æ¶ </category>
          
          <category> Javaå¼€å‘æ¡†æ¶ </category>
          
          <category> MybatisPlus </category>
          
          <category> MyBatisPlus </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> å¼€å‘æ¡†æ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VsCodeä¸‹è½½å®‰è£…</title>
      <link href="/posts/c68db7e6.html"/>
      <url>/posts/c68db7e6.html</url>
      
        <content type="html"><![CDATA[<h2 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h2>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ideaä¸‹è½½å®‰è£…</title>
      <link href="/posts/97a0a1c6.html"/>
      <url>/posts/97a0a1c6.html</url>
      
        <content type="html"><![CDATA[<img src="/img/load.gif" data-original="https://mincong.io/assets/logo-intellij.png" alt="Idea" style="zoom: 150%;" /><h1 id="IDEAçš„ä¸‹è½½"><a href="#IDEAçš„ä¸‹è½½" class="headerlink" title="IDEAçš„ä¸‹è½½"></a>IDEAçš„ä¸‹è½½</h1><p>â‘  æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® <strong>IDEA</strong> å®˜ç½‘é“¾æ¥ï¼š<a href="https://www.jetbrains.com/">https://www.jetbrains.com</a>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v1.png" alt="IDEAå®˜ç½‘"></p><p>â‘¡ ç‚¹å‡» <strong>Developer Tools</strong> åé€‰æ‹© <a href="https://www.jetbrains.com/idea/"><strong>IntelliJ IDEA</strong></a> è¿›å…¥ <strong>IDEA</strong> ä¸‹è½½ç•Œé¢ï¼š</p><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v2.png" alt="IntelliJ IDEA"></p><p>â‘¢ ç‚¹å‡» <strong>Download</strong> åé€‰æ‹©æ‰€å¤„ç¯å¢ƒçš„ <strong>IDEA</strong> è¿›è¡Œ <strong>Download</strong> ä¸‹è½½</p><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v3.png" alt="IntelliJ IDEA"></p><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v4.png" alt="IntelliJ IDEA"></p><hr><h1 id="IDEAçš„å®‰è£…"><a href="#IDEAçš„å®‰è£…" class="headerlink" title="IDEAçš„å®‰è£…"></a>IDEAçš„å®‰è£…</h1><p>â‘  åŒå‡»è¿è¡Œä¸‹è½½å¥½çš„ <strong>IDEA</strong> å®‰è£…ç¨‹åº</p><p>â‘¡ é™¤äº†é€‰æ‹©æ–‡ä»¶å®‰è£…ä½ç½®ï¼Œå…¶ä½™ä¸€å¾‹é»˜è®¤å³å¯</p><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v5.png" alt="IntelliJ IDEA"></p><hr><h1 id="IDEAæ’ä»¶"><a href="#IDEAæ’ä»¶" class="headerlink" title="IDEAæ’ä»¶"></a>IDEAæ’ä»¶</h1><h2 id="â‘ -æ–‡æ¡£å¿«é€Ÿç”Ÿæˆæ’ä»¶"><a href="#â‘ -æ–‡æ¡£å¿«é€Ÿç”Ÿæˆæ’ä»¶" class="headerlink" title="â‘  æ–‡æ¡£å¿«é€Ÿç”Ÿæˆæ’ä»¶"></a>â‘  æ–‡æ¡£å¿«é€Ÿç”Ÿæˆæ’ä»¶</h2><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v6.png" alt="ApiPost-Help"></p><h2 id="â‘¡-æ˜¾ç¤ºä»£ç ç¼©ç•¥å›¾æ’ä»¶"><a href="#â‘¡-æ˜¾ç¤ºä»£ç ç¼©ç•¥å›¾æ’ä»¶" class="headerlink" title="â‘¡ æ˜¾ç¤ºä»£ç ç¼©ç•¥å›¾æ’ä»¶"></a>â‘¡ æ˜¾ç¤ºä»£ç ç¼©ç•¥å›¾æ’ä»¶</h2><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v7.png" alt="CodeGlance"></p><h2 id="â‘¢-ä»£ç å¿«é€Ÿç”Ÿæˆæ’ä»¶"><a href="#â‘¢-ä»£ç å¿«é€Ÿç”Ÿæˆæ’ä»¶" class="headerlink" title="â‘¢ ä»£ç å¿«é€Ÿç”Ÿæˆæ’ä»¶"></a>â‘¢ ä»£ç å¿«é€Ÿç”Ÿæˆæ’ä»¶</h2><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v8.png" alt="EasyCode"></p><h2 id="â‘£-ä»£ç æäº¤ä¿¡æ¯è§„èŒƒæ’ä»¶"><a href="#â‘£-ä»£ç æäº¤ä¿¡æ¯è§„èŒƒæ’ä»¶" class="headerlink" title="â‘£ ä»£ç æäº¤ä¿¡æ¯è§„èŒƒæ’ä»¶"></a>â‘£ ä»£ç æäº¤ä¿¡æ¯è§„èŒƒæ’ä»¶</h2><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v9.png" alt="Git Commit Message Helper"></p><h2 id="â‘¤-Mybatisæ¡†æ¶æ’ä»¶"><a href="#â‘¤-Mybatisæ¡†æ¶æ’ä»¶" class="headerlink" title="â‘¤ Mybatisæ¡†æ¶æ’ä»¶"></a>â‘¤ Mybatisæ¡†æ¶æ’ä»¶</h2><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v10.png" alt="MybatisX"></p><h2 id="â‘¥-å½©è™¹æ‹¬å·æ’ä»¶"><a href="#â‘¥-å½©è™¹æ‹¬å·æ’ä»¶" class="headerlink" title="â‘¥ å½©è™¹æ‹¬å·æ’ä»¶"></a>â‘¥ å½©è™¹æ‹¬å·æ’ä»¶</h2><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v11.png" alt="Rainbow Brackets"></p><h2 id="â‘¦-ç±»æ³¨é‡Šå‘ˆç°æ’ä»¶"><a href="#â‘¦-ç±»æ³¨é‡Šå‘ˆç°æ’ä»¶" class="headerlink" title="â‘¦ ç±»æ³¨é‡Šå‘ˆç°æ’ä»¶"></a>â‘¦ ç±»æ³¨é‡Šå‘ˆç°æ’ä»¶</h2><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v12.png" alt="Show Comment"></p><h2 id="â‘§-é€šä¹‰æ™ºèƒ½AIæ’ä»¶"><a href="#â‘§-é€šä¹‰æ™ºèƒ½AIæ’ä»¶" class="headerlink" title="â‘§ é€šä¹‰æ™ºèƒ½AIæ’ä»¶"></a>â‘§ é€šä¹‰æ™ºèƒ½AIæ’ä»¶</h2><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v13.png" alt="TongYi"></p><h2 id="â‘¨-é˜¿é‡Œå·´å·´è§„çº¦æ’ä»¶"><a href="#â‘¨-é˜¿é‡Œå·´å·´è§„çº¦æ’ä»¶" class="headerlink" title="â‘¨ é˜¿é‡Œå·´å·´è§„çº¦æ’ä»¶"></a>â‘¨ é˜¿é‡Œå·´å·´è§„çº¦æ’ä»¶</h2><p><img src="/img/load.gif" data-original="/images/tools/idea/a/v14.png" alt="Alibaba Java Coding Guidenlines"></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
          <category> Javaåç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker</title>
      <link href="/posts/f5f9fa9b.html"/>
      <url>/posts/f5f9fa9b.html</url>
      
        <content type="html"><![CDATA[<p>Docker</p><h3 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h3><p><img src="/img/load.gif" data-original="https://pic.imgdb.cn/item/64c0ad651ddac507cc99ceb7.jpg" alt="docker"></p>]]></content>
      
      
      <categories>
          
          <category> SpringCloud </category>
          
          <category> Docker </category>
          
          <category> ç¯å¢ƒæ­å»º </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> ç¯å¢ƒæ­å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/4a17b156.html"/>
      <url>/posts/4a17b156.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><h3 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h3><p><img src="/img/load.gif" data-original="https://wallpaperm.cmcm.com/d5930dbadd09bfeec767d7c538f92445.jpg" alt="å›¾ç‰‡"></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
